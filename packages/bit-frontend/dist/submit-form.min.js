!function(){"use strict";function e(e,t){const o=new URL(e);return o.searchParams.append("action","bitforms_submit_form"),fetch(o,{method:"POST",body:t})}function t(e,t,s){e.then((e=>new Promise(((o,n)=>{if(e.staus>400){const o=new CustomEvent("bf-form-submit-error",{detail:{formId:t,errors:result.data}});bfSelect(`#form-${t}`).dispatchEvent(o),500===e.staus?n(new Error("Mayebe Internal Server Error")):n(e.json())}else o(e.json())})))).then((e=>{const a=new CustomEvent("bf-form-submit-success",{detail:{formId:t,entryId:e.entryId,formData:s}});bfSelect(`#form-${t}`).dispatchEvent(a);let c=null,i=null,d="";if(void 0!==e&&e.success){const r=bfSelect(`#form-${t}`);var l,f;o(t),"object"==typeof e.data?(r&&(null==e||null===(l=e.data)||void 0===l||null===(f=l.hidden_fields)||void 0===f||f.map((e=>{setHiddenFld(e,r)}))),c=e.data.redirectPage,e.data.cron&&(i=e.data.cron),e.data.cronNotOk&&(i=e.data.cronNotOk),e.data.new_nonce&&(d=e.data.new_nonce),n({contentId:t,msgId:e.data.msg_id,msg:e.data.message,show:!0,type:"success",error:!1,id:1})):n({contentId:t,msg:e.data,type:"success",show:!0,error:!1,id:2})}else{const o=new CustomEvent("bf-form-submit-error",{detail:{formId:t,errors:e.data}});bfSelect(`#form-${t}`).dispatchEvent(o),function(e,t){const{data:o}=e;o&&"string"==typeof o?n({contentId:t,msg:o,error:!0,show:!0,id:4}):o&&(void 0!==o.$form&&(n({contentId:t,msg:o.$form,error:!0,show:!0,id:5}),delete o.$form),Object.keys(o).length>0&&function(e,t){Object.keys(e).forEach((o=>{const n=bfSelect(`#form-${t} .${o}-err-txt`);n.innerHTML=e[o],n.parentElement.style.marginTop="5px",n.parentElement.style.height=`${n.offsetHeight}px`,n.parentElement.style.removeProperty("display")}))}(o,t))}(e,t)}if(function(e,t,o){const n=window.bf_globals[o];if(e)if("string"==typeof e){const t=new URL(e);t.protocol!==window.location.protocol&&(t.protocol=window.location.protocol),fetch(t)}else{const o=new URL(n.ajaxURL);o.searchParams.append("action","bitforms_trigger_workflow");const r={cronNotOk:e,token:t||n.nonce,id:n.appID};fetch(o,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}}(i,d,t),c){const e=setTimeout((()=>{window.location=decodeURI(c),e&&clearTimeout(e)}),1e3)}r(t,!1)})).catch((e=>{const o=null!=e&&e.message?e.message:"Unknown Error";n({contentId:t,msg:o,show:!0,type:"error",error:!0,id:3}),r(t,!1)}))}function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){const t=new CustomEvent("bf-form-reset",{detail:{formId:e}});bfSelect(`#form-${e}`).dispatchEvent(t)}const o=window.bf_globals[e];var n,r;bfSelect(`#form-${e}`).reset(),localStorage.setItem("bf-entry-id",""),"undefined"!=typeof customFieldsReset&&customFieldsReset(o),o.gRecaptchaSiteKey&&"v2"===o.gRecaptchaVersion&&(null===(n=window)||void 0===n||null===(r=n.grecaptcha)||void 0===r||r.reset())}function n(e){let t=bfSelect(`#bf-form-msg-wrp-${e.contentId}`);t.innerHTML=`<div class="form-msg deactive ${e.type}">${e.msg}</div>`,t=bfSelect(".form-msg",t),e.msgId&&(t=bfSelect(`.msg-content-${e.msgId} .msg-content`,bfSelect(`#${e.contentId}`)),t.innerHTML=e.msg,t=bfSelect(`.msg-container-${e.msgId}`,bfSelect(`#${e.contentId}`))),t&&t.classList.replace("active","deactive"),t&&(setTimeout((()=>{t.classList.replace("deactive","active")}),100),setTimeout((()=>{t.classList.replace("active","deactive")}),5e3))}function r(e,t){bfSelect('button[type="submit"]',bfSelect(`#form-${e}`)).disabled=t}document.querySelectorAll("form").forEach((n=>{var s,a;null!==(s=n.id)&&void 0!==s&&s.startsWith("form-bitforms")&&(n.addEventListener("submit",(o=>function(o){o.preventDefault();const n=o.target.id.slice(o.target.id.indexOf("-")+1);if("undefined"!=typeof validateForm&&!validateForm({form:n})){const e=new CustomEvent("bf-form-validation-error",{detail:{formId:n,fieldId:"",error:""}});return void o.target.dispatchEvent(e)}r(n,!0);let s=new FormData(o.target);const a=window.bf_globals[n];"undefined"!=typeof advancedFileHandle&&(s=advancedFileHandle(a,s)),a.GCLID&&s.set("GCLID",a.GCLID);const c=[];Object.entries((null==a?void 0:a.fields)||{}).forEach((e=>{var t,o;null!==(t=e[1])&&void 0!==t&&null!==(o=t.valid)&&void 0!==o&&o.hide&&c.push(e[0])})),c.length&&s.append("hidden_fields",c),"v3"===(null==a?void 0:a.gRecaptchaVersion)&&null!=a&&a.gRecaptchaSiteKey?grecaptcha.ready((()=>{grecaptcha.execute(a.gRecaptchaSiteKey,{action:"submit"}).then((o=>{s.append("g-recaptcha-response",o),t(e(null==a?void 0:a.ajaxURL,s),n,s)}))})):t(e(null==a?void 0:a.ajaxURL,s),n,s)}(o))),null===(a=bfSelect('button[type="reset"]',n))||void 0===a||a.addEventListener("click",(e=>o(e,!0))))})),localStorage.setItem("bf-entry-id","")}();
