!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bit_filepond_plugin_file_validate_type=t()}(this,(function(){"use strict";
/*!
   * FilePondPluginFileValidateType 1.2.8
   * Licensed under MIT, https://opensource.org/licenses/MIT/
   * Please visit https://pqina.nl/filepond/ for details.
   */const e=({addFilter:e,utils:t})=>{const{Type:i,isString:n,replaceInString:l,guesstimateMimeType:T,getExtensionFromFilename:E,getFilenameFromURL:o}=t,_=(e,t)=>e.some((e=>{return/\*$/.test(e)?(i=e,(/^[^/]+/.exec(t)||[]).pop()===i.slice(0,-2)):e===t;var i})),a=(e,t,i)=>{if(0===t.length)return!0;const l=(e=>{let t="";if(n(e)){const i=o(e),n=E(i);n&&(t=T(n))}else t=e.type;return t})(e);return i?new Promise(((n,T)=>{i(e,l).then((e=>{_(t,e)?n():T()})).catch(T)})):_(t,l)};return e("SET_ATTRIBUTE_TO_OPTION_MAP",(e=>Object.assign(e,{accept:"acceptedFileTypes"}))),e("ALLOW_HOPPER_ITEM",((e,{query:t})=>!t("GET_ALLOW_FILE_TYPE_VALIDATION")||a(e,t("GET_ACCEPTED_FILE_TYPES")))),e("LOAD_FILE",((e,{query:t})=>new Promise(((i,n)=>{if(!t("GET_ALLOW_FILE_TYPE_VALIDATION"))return void i(e);const T=t("GET_ACCEPTED_FILE_TYPES"),E=t("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),o=a(e,T,E),_=()=>{const e=T.map((i=t("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"),e=>null!==i[e]&&(i[e]||e))).filter((e=>!1!==e));var i;const E=e.filter((function(t,i){return e.indexOf(t)===i}));n({status:{main:t("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:l(t("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:E.join(", "),allButLastType:E.slice(0,-1).join(", "),lastType:E[e.length-1]})}})};if("boolean"==typeof o)return o?i(e):_();o.then((()=>{i(e)})).catch(_)})))),{options:{allowFileTypeValidation:[!0,i.BOOLEAN],acceptedFileTypes:[[],i.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",i.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",i.STRING],fileValidateTypeLabelExpectedTypesMap:[{},i.OBJECT],fileValidateTypeDetectType:[null,i.FUNCTION]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e}));
