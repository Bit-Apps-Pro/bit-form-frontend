!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(e="undefined"!=typeof globalThis?globalThis:e||self).bit_file_up_field=s()}(this,(function(){"use strict";return class{#e=null;#s=null;#t=null;#i=null;#a=null;#l=null;#c=null;#n=null;#r={};#o=[];#d=null;#f={};#h="";#p={id:"upload",name:"upload",required:!0,multiple:!1,maxSize:0,sizeUnit:"KB",isItTotalMax:!1,showMaxSize:!0,showSelectStatus:!0,fileSelectStatus:"No Choosen File",allowedFileType:"",showFileList:!0,showFilePreview:!0,showFileSize:!0,accept:".pdf,.exe,.msi",duplicateAllow:!1,capture:"",minFile:0,maxFile:0,onchange:()=>{},oninput:()=>{}};constructor(e,s){Object.assign(this.#p,s),this.#d=s.document?s.document:document,this.#f=s.window?s.window:window,this.#e="string"==typeof e?this.#d.querySelector(e):e,this.fieldKey=this.#p.fieldKey,this.#h=s.assetsURL?s.assetsURL:"",this.init()}init(){var e,s;this.#s=this.#u(`.${this.fieldKey}-label`),this.#t=this.#u(`.${this.fieldKey}-inp-btn`),this.#i=this.#u(`.${this.fieldKey}-file-select-status`),this.#a=this.#u(`.${this.fieldKey}-max-size-lbl`),this.#l=this.#u(`.${this.fieldKey}-file-upload-input`),this.#c=this.#u(`.${this.fieldKey}-files-list`),this.#n=this.#u(`.${this.fieldKey}-err-wrp`);const{multiple:t,allowedFileType:i,accept:a,required:l,showMaxSize:c,maxSize:n,sizeUnit:r,showSelectStatus:o,fileSelectStatus:d}=this.#p;this.#l.multiple=t,this.#l.accept=i?`${i}, ${a}`:a,o?this.#i.innerText=d:null===(e=this.#i)||void 0===e||e.remove(),this.#p.showFileList||null===(s=this.#c)||void 0===s||s.remove(),this.#m(this.#l,"change",(e=>this.#v(e)))}#v(e){const{files:s}=this.#l,{sizeUnit:t,maxSize:i,isItTotalMax:a,multiple:l,showFileList:c,showFilePreview:n,showFileSize:r,showSelectStatus:o,fileSelectStatus:d,minFile:f,maxFile:h}=this.#p,p=this.#w(t,i);let u=0;const m=[];this.#g(this.#n,"active"),a&&Object.values(this.#r).forEach((e=>{u+=e.size})),!l&&s.length>0&&(this.#r={},this.#c&&(this.#c.innerHTML=""));for(const e of s){const s=e.name.replaceAll(/( |\.|\(|\))/g,"");this.#r[s]?m.push("File Allready Exist"):!i||e.size+u<=p?!(h>0)||Object.keys(this.#r).length<h?(this.#r[s]=e,c&&(this.#c.innerHTML+=`<div id="file-wrp-${s}" data-dev-file-wrpr='${this.fieldKey}' class="${this.fieldKey}-file-wrpr">\n                ${n?`<img src="${this.#S(e)}" alt="Uploaded Image"  data-dev-file-preview='${this.fieldKey}' class="${this.fieldKey}-file-preview" />`:""}\n                  <div class="${this.fieldKey}-file-details">\n                    <span data-dev-file-title='${this.fieldKey}' class="${this.fieldKey}-file-title">${e.name}</span>\n                    ${r?`<span data-dev-file-size='${this.fieldKey}' class="${this.fieldKey}-file-size">${this.#$(e.size)}</span>`:""}\n                  </div>\n                  <button data-file-id="${s}" data-dev-cross-btn='${this.fieldKey}' class="${this.fieldKey}-cross-btn">Ã—</button>\n              </div>`),a&&(u+=e.size)):(this.#n.innerText="Maximum File Limit Exceeded",this.#L(this.#n,"active"),setTimeout((()=>{this.#g(this.#n,"active")}),3e3)):m.push("Max Upload Size Exceeded")}this.#f.document.querySelectorALL(),this.#f.document.querySelectorALL(`.${this.fieldKey}-cross-btn`).forEach((e=>{this.#m(e,"click",(e=>this.#y(e)))}));const v=Object.keys(this.#r).length;v&&o?this.#i.innerText=`${v} file${v>1?"s":""} selected`:o&&(this.#i.innerText=d),f>0&&v<f&&(this.#n.innerText=`You should add minmum ${f} File`,this.#L(this.#n,"active")),m.map(((e,s)=>{this.#c.insertAdjacentHTML("afterbegin",`\n      <div id='err-${s}' class="${this.fieldKey}-err-wrp">\n          <span>${e}</span>\n      </div>`);const t=this.#u(`#err-${s}`);t.classList.add("active"),setTimeout((()=>{t.classList.remove("active")}),3e3),setTimeout((()=>{null==t||t.remove()}),5e3)}))}#y=e=>{var s;const t=e.target.getAttribute("data-file-id");null===(s=this.#d.querySelector(`#file-wrp-${t}`))||void 0===s||s.remove(),delete this.#r[t];const i=Object.keys(this.#r).length;this.#i.innerText=i?`${i} file${i>1?"s":""} selected`:this.#p.fileSelectStatus};#u(e){return this.#e.querySelector(e)}#x(e){var s;null===(s=this.#d.querySelector(e))||void 0===s||s.remove()}#S(e){switch(e.name.substring(e.name.lastIndexOf(".")+1)){case"xbm":case"tif":case"pjp":case"pjpeg":case"svgz":case"jpg":case"jpeg":case"ico":case"tiff":case"gif":case"svg":case"bmp":case"png":case"jfif":case"webp":return URL.createObjectURL(e);case"7z":case"arj":case"deb":case"pkg":case"rar":case".rpm":case".gz":case"z":case"zip":return`${this.#h}/../static/file-upload/zip-compressed.svg`;case"key":case"odp":case"pps":case"ppt":case"pptx":return`${this.#h}/../static/file-upload/presentation.svg`;case"_RF_":case"doc":case"docx":case"odt":case"pdf":case"rtf":case"tex":case"txt":case"wks":case"wps":case"wpd":return`${this.#h}/../static/file-upload/document.svg`;case"csv":case"dat":case"db":case"dbf":case"log":case"mdb":case"sav":case"sql":case"tar":case"sqlite":case"xml":return`${this.#h}/../static/file-upload/database.svg`;case"opus":case"flac":case"webm":case"weba":case"wav":case"ogg":case"m4a":case"mp3":case"oga":case"mid":case"amr":case"aiff":case"wma":case"au":case"acc":case"wpl":case"ogm":case"wmv":case"mpg":case"ogv":case"mov":case"asx":case"mpeg":case"mp4":case"m4v":case"avi":case"3gp":case"flv":case"mkv":case"swf":return`${this.#h}/../static/file-upload/file-audio.svg`;default:return`${this.#h}/../static/file-upload/paperclip.svg`}}#m(e,s,t){e.addEventListener(s,t),this.#o.push({element:e,eventType:s,eventAction:t})}#L(e,s){e.classList.add(s)}#g(e,s){e.classList.remove(s)}#$(e){return e<1024?`${e}Bytes`:e>=1024&&e<1048576?`${(e/1024).toFixed(1)}KB`:e>=1048576&&e<1073741824?`${(e/1048576).toFixed(1)}MB`:e>=1073741824?`${(e/1073741824).toFixed(1)}GB`:void 0}#w(e,s){switch(e){case"Bytes":return s;case"KB":return 1024*s;case"MB":return 1048576*s;case"GB":return 1073741824*s;default:return 0}}#b(){this.#o.forEach((e=>{let{element:s,eventType:t,eventAction:i}=e;s.removeEventListener(t,i)}))}destroy(){this.#c&&(this.#c.innerHTML=""),this.#b()}}}));
