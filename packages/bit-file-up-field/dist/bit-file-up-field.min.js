var bit_file_up_field=function(){"use strict";return class{#e=null;#s=null;#t=null;#i=null;#l=null;#a=null;#c=null;#r=null;#n=null;#h={};#o=[];#f=null;#p={};#u={};#d={};#m="";#v="";#g={id:"upload",name:"upload",required:!0,multiple:!1,maxSize:0,sizeUnit:"KB",isItTotalMax:!1,showMaxSize:!0,showSelectStatus:!0,fileSelectStatus:"No Choosen File",allowedFileType:"",showFileList:!0,showFilePreview:!0,showFileSize:!0,accept:".pdf,.exe,.msi",duplicateAllow:!1,capture:"",minFile:0,maxFile:0,onchange:()=>{},oninput:()=>{}};constructor(e,s){Object.assign(this.#g,s),this.#f=s.document?s.document:document,this.#p=s.window?s.window:window,this.#u=s.attributes||{},this.#d=s.classNames||{},this.#e="string"==typeof e?this.#f.querySelector(e):e,this.#m=this.#g.fieldKey,this.fieldKey=this.#m,this.#v=s.assetsURL||"",this.init()}init(){this.#s=this.#w(`.${this.#m}-label`),this.#t=this.#w(`.${this.#m}-inp-btn`),this.#i=this.#w(`.${this.#m}-file-select-status`),this.#l=this.#w(`.${this.#m}-file-input-wrpr`),this.#a=this.#w(`.${this.#m}-max-size-lbl`),this.#c=this.#w(`.${this.#m}-file-upload-input`),this.#n=this.#w(`.${this.#m}-file-input-wrpr .err-wrp`);const{multiple:e,allowedFileType:s,accept:t,showSelectStatus:i,fileSelectStatus:l}=this.#g;this.#c.multiple=e,this.#c.accept=s?`${s}, ${t}`:t,i?this.#i.innerHTML=l:this.#i?.remove(),this.#h={},this.#b(),this.#L(this.#c,"change",(e=>this.#S(e)))}#S(e){const{files:s}=this.#c,{sizeUnit:t,allowMaxSize:i,maxSize:l,maxSizeErrMsg:a,isItTotalMax:c,multiple:r,showFileList:n,fileExistMsg:h,showFilePreview:o,showFileSize:f,showSelectStatus:p,fileSelectStatus:u,minFile:d,minFileErrMsg:m,maxFile:v,maxFileErrMsg:g}=this.#g,w=this.#C(t,l);let b=0;const L=[];this.#x(this.#n,"active"),c&&Object.values(this.#h).forEach((e=>{b+=e.size})),!r&&s.length>0&&(this.#h={},this.#r&&this.#z(this.#r,""));for(let e=0;e<s.length;e+=1){const t=s[e],r=t.name.replace(/( |\.|\(|\))/g,"");if(this.#h[r])L.push(h);else if(!i||!l||t.size+b<=w)if(!(v>0)||Object.keys(this.#h).length<v){if(this.#h[r]=t,n){this.#r||this.#y();const e=this.#F("div");if(e.id=`file-wrp-${r}`,this.#U(e,"file-wrpr"),"file-wrpr"in this.#d){const s=this.#d["file-wrpr"];s&&this.#$(e,s)}if("file-wrpr"in this.#u){const s=this.#u["file-wrpr"];this.#E(e,s)}if(o){const s=this.#F("img");if(s.src=this.#T(t),s.alt="Image Uploaded",this.#U(s,"file-preview"),"file-preview"in this.#d){const e=this.#d["file-preview"];e&&this.#$(s,e)}if("file-preview"in this.#u){const e=this.#u["file-preview"];this.#E(s,e)}e.append(s)}const s=this.#F("div");this.#U(s,"file-details");const i=this.#F("span");if(this.#U(i,"file-title"),"file-title"in this.#d){const e=this.#d["file-title"];e&&this.#$(i,e)}if("file-title"in this.#g.attributes){const e=this.#g.attributes["file-title"];this.#E(i,e)}if(this.#z(i,t.name),s.append(i),f){const e=this.#F("span");if(this.#U(e,"file-size"),"file-size"in this.#d){const s=this.#d["file-size"];s&&this.#$(e,s)}if("file-size"in this.#g.attributes){const s=this.#g.attributes["file-size"];this.#E(e,s)}this.#z(e,this.#A(t.size)),s.append(e)}e.append(s);const l=this.#F("button");if(this.#U(l,"cross-btn"),"cross-btn"in this.#d){const e=this.#d["cross-btn"];e&&this.#$(l,e)}if(this.#I(l,"data-file-id",r),"cross-btn"in this.#g.attributes){const e=this.#g.attributes["cross-btn"];this.#E(l,e)}this.#z(l,"Ã—"),e.append(l),this.#r.append(e)}c&&(b+=t.size)}else this.#n.innerHTML=g,this.#U(this.#n,"active"),setTimeout((()=>{this.#x(this.#n,"active")}),3e3);else L.push(a)}this.#M(`.${this.#m}-file-input-wrpr .cross-btn`).forEach((e=>{this.#L(e,"click",(e=>this.#K(e)))}));const S=Object.keys(this.#h).length;this.#N(),S&&p?this.#i.innerText=`${S} file${S>1?"s":""} selected`:p&&(this.#i.innerHTML=u),d>0&&S<d&&(this.#n.innerHTML=m,this.#U(this.#n,"active")),!this.#r&&L.length>0&&this.#y(),L.map(((e,s)=>{this.#r.insertAdjacentHTML("afterbegin",`\n      <div id='err-${s}' class="err-wrp">\n          ${e}\n      </div>`);const t=this.#w(`#err-${s}`);this.#U(t,"active"),setTimeout((()=>{this.#x(t,"active")}),3e3),setTimeout((()=>{t?.remove(),Object.keys(this.#h).length||this.#b()}),5e3)}))}#y(){if(this.#r=this.#F("div"),this.#U(this.#r,"files-list"),"files-list"in this.#d){const e=this.#d["files-list"];e&&this.#$(this.#r,e)}if("files-list"in this.#u){const e=this.#u["files-list"];this.#E(this.#r,e)}this.#l.append(this.#r)}#b(){this.#r?.remove(),this.#r=null}#N(){const e=new DataTransfer;Object.values(this.#h)?.forEach((s=>{e.items.add(s)})),this.#c.files=e.files}#K=e=>{const s=e.target.getAttribute("data-file-id");this.#j(`#file-wrp-${s}`),delete this.#h[s];const t=Object.keys(this.#h).length;t?this.#i.innerText=`${t} file${t>1?"s":""} selected`:(this.#i.innerHTML=this.#g.fileSelectStatus,this.#b()),this.#N()};#w(e){return this.#e.querySelector(e)}#M(e){return this.#e.querySelectorAll(e)}#j(e){this.#w(e)?.remove()}#F(e){return this.#f.createElement(e)}#T(e){switch(e.name.substring(e.name.lastIndexOf(".")+1)){case"xbm":case"tif":case"pjp":case"pjpeg":case"svgz":case"jpg":case"jpeg":case"ico":case"tiff":case"gif":case"svg":case"bmp":case"png":case"jfif":case"webp":return URL.createObjectURL(e);case"7z":case"arj":case"deb":case"pkg":case"rar":case".rpm":case".gz":case"z":case"zip":return`${this.#v}/zip-compressed.svg`;case"key":case"odp":case"pps":case"ppt":case"pptx":return`${this.#v}/presentation.svg`;case"_RF_":case"doc":case"docx":case"odt":case"pdf":case"rtf":case"tex":case"txt":case"wks":case"wps":case"wpd":return`${this.#v}/document.svg`;case"csv":case"dat":case"db":case"dbf":case"log":case"mdb":case"sav":case"sql":case"tar":case"sqlite":case"xml":return`${this.#v}/database.svg`;case"opus":case"flac":case"webm":case"weba":case"wav":case"ogg":case"m4a":case"mp3":case"oga":case"mid":case"amr":case"aiff":case"wma":case"au":case"acc":case"wpl":case"ogm":case"wmv":case"mpg":case"ogv":case"mov":case"asx":case"mpeg":case"mp4":case"m4v":case"avi":case"3gp":case"flv":case"mkv":case"swf":return`${this.#v}/file-audio.svg`;default:return`${this.#v}/paperclip.svg`}}#L(e,s,t){e.addEventListener(s,t),this.#o.push({element:e,eventType:s,eventAction:t})}#U(e,s){e.classList.add(s)}#x(e,s){e.classList.remove(s)}#z(e,s){e.textContent=s}#I(e,s,t){e?.setAttribute?.(s,t)}#$(e,s){s.trim().split(/\b\s+\b/g).forEach((s=>this.#U(e,s)))}#E(e,s){const t=s.length;if(t)for(let i=0;i<t;i+=1)this.#I(e,s[i].key,s[i].value)}#A(e){return e<1024?`${e}Bytes`:e>=1024&&e<1048576?`${(e/1024).toFixed(1)}KB`:e>=1048576&&e<1073741824?`${(e/1048576).toFixed(1)}MB`:e>=1073741824?`${(e/1073741824).toFixed(1)}GB`:void 0}#C(e,s){switch(e){case"Bytes":return s;case"KB":return 1024*s;case"MB":return 1048576*s;case"GB":return 1073741824*s;default:return 0}}#W(){this.#o.forEach((e=>{let{element:s,eventType:t,eventAction:i}=e;s.removeEventListener(t,i)}))}destroy(){this.#r&&(this.#r.innerHTML=""),this.#W()}reset(){this.destroy(),this.init()}}}();
