var bit_filepond_plugin_image_crop=function(){"use strict";const e=e=>/^image/.test(e.type),t=t=>{let{addFilter:o,utils:r}=t;const{Type:n,isFile:a,getNumericAspectRatioFromString:i}=r,p=(t,o)=>!(!e(t.file)||!o("GET_ALLOW_IMAGE_CROP")),c=e=>"object"==typeof e,s=e=>"number"==typeof e,d=(e,t)=>e.setMetadata("crop",Object.assign({},e.getMetadata("crop"),t));return o("DID_CREATE_ITEM",((e,t)=>{let{query:o}=t;e.extend("setImageCrop",(t=>{if(p(e,o)&&c(center))return e.setMetadata("crop",t),t})),e.extend("setImageCropCenter",(t=>{if(p(e,o)&&c(t))return d(e,{center:t})})),e.extend("setImageCropZoom",(t=>{if(p(e,o)&&s(t))return d(e,{zoom:Math.max(1,t)})})),e.extend("setImageCropRotation",(t=>{if(p(e,o)&&s(t))return d(e,{rotation:t})})),e.extend("setImageCropFlip",(t=>{if(p(e,o)&&c(t))return d(e,{flip:t})})),e.extend("setImageCropAspectRatio",(t=>{if(!p(e,o)||void 0===t)return;const r=e.getMetadata("crop"),n=i(t),a={center:{x:.5,y:.5},flip:r?Object.assign({},r.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:n};return e.setMetadata("crop",a),a}))})),o("DID_LOAD_ITEM",((t,o)=>{let{query:r}=o;return new Promise(((o,n)=>{const p=t.file;if(!a(p)||!e(p)||!r("GET_ALLOW_IMAGE_CROP"))return o(t);if(t.getMetadata("crop"))return o(t);const c=r("GET_IMAGE_CROP_ASPECT_RATIO");t.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:c?i(c):null}),o(t)}))})),{options:{allowImageCrop:[!0,n.BOOLEAN],imageCropAspectRatio:[null,n.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:t})),t}();
