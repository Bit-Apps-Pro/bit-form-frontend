!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bit_filepond_plugin_image_crop=t()}(this,(function(){"use strict";
/*!
   * FilePondPluginImageCrop 2.0.6
   * Licensed under MIT, https://opensource.org/licenses/MIT/
   * Please visit https://pqina.nl/filepond/ for details.
   */const e=e=>/^image/.test(e.type),t=({addFilter:t,utils:o})=>{const{Type:n,isFile:i,getNumericAspectRatioFromString:r}=o,a=(t,o)=>!(!e(t.file)||!o("GET_ALLOW_IMAGE_CROP")),p=e=>"object"==typeof e,d=e=>"number"==typeof e,s=(e,t)=>e.setMetadata("crop",Object.assign({},e.getMetadata("crop"),t));return t("DID_CREATE_ITEM",((e,{query:t})=>{e.extend("setImageCrop",(o=>{if(a(e,t)&&p(center))return e.setMetadata("crop",o),o})),e.extend("setImageCropCenter",(o=>{if(a(e,t)&&p(o))return s(e,{center:o})})),e.extend("setImageCropZoom",(o=>{if(a(e,t)&&d(o))return s(e,{zoom:Math.max(1,o)})})),e.extend("setImageCropRotation",(o=>{if(a(e,t)&&d(o))return s(e,{rotation:o})})),e.extend("setImageCropFlip",(o=>{if(a(e,t)&&p(o))return s(e,{flip:o})})),e.extend("setImageCropAspectRatio",(o=>{if(!a(e,t)||void 0===o)return;const n=e.getMetadata("crop"),i=r(o),p={center:{x:.5,y:.5},flip:n?Object.assign({},n.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:i};return e.setMetadata("crop",p),p}))})),t("DID_LOAD_ITEM",((t,{query:o})=>new Promise(((n,a)=>{const p=t.file;if(!i(p)||!e(p)||!o("GET_ALLOW_IMAGE_CROP"))return n(t);if(t.getMetadata("crop"))return n(t);const d=o("GET_IMAGE_CROP_ASPECT_RATIO");t.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:d?r(d):null}),n(t)})))),{options:{allowImageCrop:[!0,n.BOOLEAN],imageCropAspectRatio:[null,n.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:t})),t}));
