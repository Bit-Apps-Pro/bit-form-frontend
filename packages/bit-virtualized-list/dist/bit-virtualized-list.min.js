!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.bit_virtualized_list=t():e.bit_virtualized_list=t()}(self,(function(){return function(){"use strict";var e={d:function(t,i){for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:function(){return v}});var i;var n="undefined"==typeof document?void 0:document,o=!!n&&"content"in n.createElement("template"),r=!!n&&n.createRange&&"createContextualFragment"in n.createRange();function a(e){return e=e.trim(),o?function(e){var t=n.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(e):r?function(e){return i||(i=n.createRange()).selectNode(n.body),i.createContextualFragment(e).childNodes[0]}(e):function(e){var t=n.createElement("body");return t.innerHTML=e,t.childNodes[0]}(e)}function s(e,t){var i,n,o=e.nodeName,r=t.nodeName;return o===r||(i=o.charCodeAt(0),n=r.charCodeAt(0),i<=90&&n>=97?o===r.toUpperCase():n<=90&&i>=97&&r===o.toUpperCase())}function d(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}var f={OPTION:function(e,t){var i=e.parentNode;if(i){var n=i.nodeName.toUpperCase();"OPTGROUP"===n&&(n=(i=i.parentNode)&&i.nodeName.toUpperCase()),"SELECT"!==n||i.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),i.selectedIndex=-1)}d(e,t,"selected")},INPUT:function(e,t){d(e,t,"checked"),d(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var i=t.value;e.value!==i&&(e.value=i);var n=e.firstChild;if(n){var o=n.nodeValue;if(o==i||!i&&o==e.placeholder)return;n.nodeValue=i}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var i,n,o=-1,r=0,a=e.firstChild;a;)if("OPTGROUP"===(n=a.nodeName&&a.nodeName.toUpperCase()))a=(i=a).firstChild;else{if("OPTION"===n){if(a.hasAttribute("selected")){o=r;break}r++}!(a=a.nextSibling)&&i&&(a=i.nextSibling,i=null)}e.selectedIndex=o}}};function u(){}function l(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}var h=function(e){return function(t,i,o){if(o||(o={}),"string"==typeof i)if("#document"===t.nodeName||"HTML"===t.nodeName||"BODY"===t.nodeName){var r=i;(i=n.createElement("html")).innerHTML=r}else i=a(i);var d=o.getNodeKey||l,h=o.onBeforeNodeAdded||u,c=o.onNodeAdded||u,p=o.onBeforeElUpdated||u,m=o.onElUpdated||u,v=o.onBeforeNodeDiscarded||u,g=o.onNodeDiscarded||u,S=o.onBeforeElChildrenUpdated||u,y=!0===o.childrenOnly,b=Object.create(null),x=[];function z(e){x.push(e)}function A(e,t){if(1===e.nodeType)for(var i=e.firstChild;i;){var n=void 0;t&&(n=d(i))?z(n):(g(i),i.firstChild&&A(i,t)),i=i.nextSibling}}function I(e,t,i){!1!==v(e)&&(t&&t.removeChild(e),g(e),A(e,i))}function C(e){c(e);for(var t=e.firstChild;t;){var i=t.nextSibling,n=d(t);if(n){var o=b[n];o&&s(t,o)?(t.parentNode.replaceChild(o,t),N(o,t)):C(t)}else C(t);t=i}}function N(t,i,o){var r=d(i);if(r&&delete b[r],!o){if(!1===p(t,i))return;if(e(t,i),m(t),!1===S(t,i))return}"TEXTAREA"!==t.nodeName?function(e,t){var i,o,r,a,u,l=t.firstChild,c=e.firstChild;e:for(;l;){for(a=l.nextSibling,i=d(l);c;){if(r=c.nextSibling,l.isSameNode&&l.isSameNode(c)){l=a,c=r;continue e}o=d(c);var p=c.nodeType,m=void 0;if(p===l.nodeType&&(1===p?(i?i!==o&&((u=b[i])?r===u?m=!1:(e.insertBefore(u,c),o?z(o):I(c,e,!0),c=u):m=!1):o&&(m=!1),(m=!1!==m&&s(c,l))&&N(c,l)):3!==p&&8!=p||(m=!0,c.nodeValue!==l.nodeValue&&(c.nodeValue=l.nodeValue))),m){l=a,c=r;continue e}o?z(o):I(c,e,!0),c=r}if(i&&(u=b[i])&&s(u,l))e.appendChild(u),N(u,l);else{var v=h(l);!1!==v&&(v&&(l=v),l.actualize&&(l=l.actualize(e.ownerDocument||n)),e.appendChild(l),C(l))}l=a,c=r}!function(e,t,i){for(;t;){var n=t.nextSibling;(i=d(t))?z(i):I(t,e,!0),t=n}}(e,c,o);var g=f[e.nodeName];g&&g(e,t)}(t,i):f.TEXTAREA(t,i)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var i=t.firstChild;i;){var n=d(i);n&&(b[n]=i),e(i),i=i.nextSibling}}(t);var _,M,T=t,w=T.nodeType,P=i.nodeType;if(!y)if(1===w)1===P?s(t,i)||(g(t),T=function(e,t){for(var i=e.firstChild;i;){var n=i.nextSibling;t.appendChild(i),i=n}return t}(t,(_=i.nodeName,(M=i.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==M?n.createElementNS(M,_):n.createElement(_)))):T=i;else if(3===w||8===w){if(P===w)return T.nodeValue!==i.nodeValue&&(T.nodeValue=i.nodeValue),T;T=i}if(T===i)g(t);else{if(i.isSameNode&&i.isSameNode(T))return;if(N(T,i,y),x)for(var E=0,R=x.length;E<R;E++){var O=b[x[E]];O&&I(O,O.parentNode,!1)}}return!y&&T!==t&&t.parentNode&&(T.actualize&&(T=T.actualize(t.ownerDocument||n)),t.parentNode.replaceChild(T,t)),T}}((function(e,t){var i,n,o,r,a=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var s=a.length-1;s>=0;s--)n=(i=a[s]).name,o=i.namespaceURI,r=i.value,o?(n=i.localName||n,e.getAttributeNS(o,n)!==r&&("xmlns"===i.prefix&&(n=i.name),e.setAttributeNS(o,n,r))):e.getAttribute(n)!==r&&e.setAttribute(n,r);for(var d=e.attributes,f=d.length-1;f>=0;f--)n=(i=d[f]).name,(o=i.namespaceURI)?(n=i.localName||n,t.hasAttributeNS(o,n)||e.removeAttributeNS(o,n)):t.hasAttribute(n)||e.removeAttribute(n)}})),c=h;var p=function(){function e(t){var i=t.itemCount,n=t.itemSizeGetter,o=t.estimatedItemSize;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._itemSizeGetter=n,this._itemCount=i,this._estimatedItemSize=o,this._itemSizeAndPositionData={},this._lastMeasuredIndex=-1}return e.prototype.getLastMeasuredIndex=function(){return this._lastMeasuredIndex},e.prototype.getSizeAndPositionForIndex=function(e){if(e<0||e>=this._itemCount)throw Error("Requested index "+e+" is outside of range 0.."+this._itemCount);if(e>this._lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),i=t.offset+t.size,n=this._lastMeasuredIndex+1;n<=e;n++){var o=this._itemSizeGetter({index:n});if(null==o||isNaN(o))throw Error("Invalid size returned for index "+n+" of value "+o);this._itemSizeAndPositionData[n]={offset:i,size:o},i+=o}this._lastMeasuredIndex=e}return this._itemSizeAndPositionData[e]},e.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this._lastMeasuredIndex>=0?this._itemSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this._itemCount-this._lastMeasuredIndex-1)*this._estimatedItemSize},e.prototype.getUpdatedOffsetForIndex=function(e){var t=e.align,i=void 0===t?"start":t,n=e.containerSize,o=e.targetIndex;if(n<=0)return 0;var r=this.getSizeAndPositionForIndex(o),a=r.offset,s=a-n+r.size,d=void 0;switch(i){case"end":d=s;break;case"center":d=a-(n-r.size)/2;break;default:d=a}var f=this.getTotalSize();return Math.max(0,Math.min(f-n,d))},e.prototype.getVisibleRange=function(e){var t=e.containerSize,i=e.offset,n=e.overscanCount;if(0===this.getTotalSize())return{};var o=i+t,r=this._findNearestItem(i),a=r,s=this.getSizeAndPositionForIndex(r);for(i=s.offset+s.size;i<o&&a<this._itemCount-1;)a++,i+=this.getSizeAndPositionForIndex(a).size;return n&&(r=Math.max(0,r-n),a=Math.min(a+n,this._itemCount)),{start:r,stop:a}},e.prototype.resetItem=function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)},e.prototype._binarySearch=function(e){for(var t=e.low,i=e.high,n=e.offset,o=void 0,r=void 0;t<=i;){if(o=t+Math.floor((i-t)/2),(r=this.getSizeAndPositionForIndex(o).offset)===n)return o;r<n?t=o+1:r>n&&(i=o-1)}if(t>0)return t-1},e.prototype._exponentialSearch=function(e){for(var t=e.index,i=e.offset,n=1;t<this._itemCount&&this.getSizeAndPositionForIndex(t).offset<i;)t+=n,n*=2;return this._binarySearch({high:Math.min(t,this._itemCount-1),low:Math.floor(t/2),offset:i})},e.prototype._findNearestItem=function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch({high:i,low:0,offset:e}):this._exponentialSearch({index:i,offset:e})},e}();var m=function(){function e(t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getRowHeight=function(e){var t=e.index,i=n.options.rowHeight;return"function"==typeof i?i(t):Array.isArray(i)?i[t]:i},this.container=t,this.options=i,this.state={},this._initializeSizeAndPositionManager(i.rowCount),this.render=this.render.bind(this),this.handleScroll=this.handleScroll.bind(this),this.componentDidMount()}return e.prototype.componentDidMount=function(){var e=this,t=this.options,i=t.onMount,n=t.initialScrollTop,o=t.initialIndex,r=t.height,a=n||null!=o&&this.getRowOffset(o)||0,s=this.inner=document.createElement("div"),d=this.content=document.createElement("div");s.setAttribute("style","position:relative; overflow:hidden; width:100%; min-height:100%; will-change: transform;"),d.setAttribute("style","position:absolute; top:0; left:0; height:100%; width:100%; overflow:visible;"),s.appendChild(d),this.container.appendChild(s),this.setState({offset:a,height:r},(function(){a&&(e.container.scrollTop=a),e.container.addEventListener("scroll",e.handleScroll),"function"==typeof i&&i()}))},e.prototype._initializeSizeAndPositionManager=function(e){this._sizeAndPositionManager=new p({itemCount:e,itemSizeGetter:this.getRowHeight,estimatedItemSize:this.options.estimatedRowHeight||100})},e.prototype.setState=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];this.state=Object.assign(this.state,t),requestAnimationFrame((function(){e.render(),"function"==typeof i&&i()}))},e.prototype.resize=function(e,t){this.setState({height:e},t)},e.prototype.handleScroll=function(e){var t=this.options.onScroll,i=this.container.scrollTop;this.setState({offset:i}),"function"==typeof t&&t(i,e)},e.prototype.getRowOffset=function(e){return this._sizeAndPositionManager.getSizeAndPositionForIndex(e).offset},e.prototype.scrollToIndex=function(e,t){var i=this.state.height,n=this._sizeAndPositionManager.getUpdatedOffsetForIndex({align:t,containerSize:i,targetIndex:e});this.container.scrollTop=n},e.prototype.setRowCount=function(e){this._initializeSizeAndPositionManager(e),this.render()},e.prototype.onRowsRendered=function(e){var t=this.options.onRowsRendered;"function"==typeof t&&t(e)},e.prototype.destroy=function(){this.container.removeEventListener("scroll",this.handleScroll),this.container.innerHTML=""},e.prototype.render=function(){for(var e=this.options,t=e.overscanCount,i=e.renderRow,n=this.state,o=n.height,r=n.offset,a=void 0===r?0:r,s=this._sizeAndPositionManager.getVisibleRange({containerSize:o,offset:a,overscanCount:t}),d=s.start,f=s.stop,u=document.createDocumentFragment(),l=d;l<=f;l++)u.appendChild(i(l));this.inner.style.height=this._sizeAndPositionManager.getTotalSize()+"px",this.content.style.top=this.getRowOffset(d)+"px",c(this.content,u,{childrenOnly:!0,getNodeKey:function(e){return e.nodeIndex}}),this.onRowsRendered({startIndex:d,stopIndex:f})},e}(),v=m;return t}()}));