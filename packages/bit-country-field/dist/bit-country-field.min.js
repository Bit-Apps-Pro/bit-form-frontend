!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).bit_country_field=e()}(this,(function(){"use strict";var t,e="undefined"==typeof document?void 0:document,i=!!e&&"content"in e.createElement("template"),n=!!e&&e.createRange&&"createContextualFragment"in e.createRange();function s(t,e){var i,n,s=t.nodeName,o=e.nodeName;return s===o||(i=s.charCodeAt(0),n=o.charCodeAt(0),i<=90&&n>=97?s===o.toUpperCase():n<=90&&i>=97&&o===s.toUpperCase())}function o(t,e,i){t[i]!==e[i]&&(t[i]=e[i],t[i]?t.setAttribute(i,""):t.removeAttribute(i))}var r={OPTION:function(t,e){var i=t.parentNode;if(i){var n=i.nodeName.toUpperCase();"OPTGROUP"===n&&(n=(i=i.parentNode)&&i.nodeName.toUpperCase()),"SELECT"!==n||i.hasAttribute("multiple")||(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),i.selectedIndex=-1)}o(t,e,"selected")},INPUT:function(t,e){o(t,e,"checked"),o(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var i=e.value;t.value!==i&&(t.value=i);var n=t.firstChild;if(n){var s=n.nodeValue;if(s==i||!i&&s==t.placeholder)return;n.nodeValue=i}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var i,n,s=-1,o=0,r=t.firstChild;r;)if("OPTGROUP"===(n=r.nodeName&&r.nodeName.toUpperCase()))r=(i=r).firstChild;else{if("OPTION"===n){if(r.hasAttribute("selected")){s=o;break}o++}!(r=r.nextSibling)&&i&&(r=i.nextSibling,i=null)}t.selectedIndex=s}}};function a(){}function l(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}var d=function(o,d,h){if(h||(h={}),"string"==typeof d)if("#document"===o.nodeName||"HTML"===o.nodeName||"BODY"===o.nodeName){var c=d;(d=e.createElement("html")).innerHTML=c}else u=(u=d).trim(),d=i?function(t){var i=e.createElement("template");return i.innerHTML=t,i.content.childNodes[0]}(u):n?function(i){return t||(t=e.createRange()).selectNode(e.body),t.createContextualFragment(i).childNodes[0]}(u):function(t){var i=e.createElement("body");return i.innerHTML=t,i.childNodes[0]}(u);var u,p=h.getNodeKey||l,f=h.onBeforeNodeAdded||a,m=h.onNodeAdded||a,y=h.onBeforeElUpdated||a,g=h.onElUpdated||a,C=h.onBeforeNodeDiscarded||a,b=h.onNodeDiscarded||a,v=h.onBeforeElChildrenUpdated||a,E=!0===h.childrenOnly,I=Object.create(null),x=[];function S(t){x.push(t)}function w(t,e){if(1===t.nodeType)for(var i=t.firstChild;i;){var n=void 0;e&&(n=p(i))?S(n):(b(i),i.firstChild&&w(i,e)),i=i.nextSibling}}function A(t,e,i){!1!==C(t)&&(e&&e.removeChild(t),b(t),w(t,i))}function N(t){m(t);for(var e=t.firstChild;e;){var i=e.nextSibling,n=p(e);if(n){var o=I[n];o&&s(e,o)?(e.parentNode.replaceChild(o,e),T(o,e)):N(e)}else N(e);e=i}}function T(t,i,n){var o=p(i);if(o&&delete I[o],!n){if(!1===y(t,i))return;if(function(t,e){var i,n,s,o,r=e.attributes;if(11!==e.nodeType&&11!==t.nodeType){for(var a=r.length-1;a>=0;a--)n=(i=r[a]).name,s=i.namespaceURI,o=i.value,s?(n=i.localName||n,t.getAttributeNS(s,n)!==o&&("xmlns"===i.prefix&&(n=i.name),t.setAttributeNS(s,n,o))):t.getAttribute(n)!==o&&t.setAttribute(n,o);for(var l=t.attributes,d=l.length-1;d>=0;d--)n=(i=l[d]).name,(s=i.namespaceURI)?(n=i.localName||n,e.hasAttributeNS(s,n)||t.removeAttributeNS(s,n)):e.hasAttribute(n)||t.removeAttribute(n)}}(t,i),g(t),!1===v(t,i))return}"TEXTAREA"!==t.nodeName?function(t,i){var n,o,a,l,d,h=i.firstChild,c=t.firstChild;t:for(;h;){for(l=h.nextSibling,n=p(h);c;){if(a=c.nextSibling,h.isSameNode&&h.isSameNode(c)){h=l,c=a;continue t}o=p(c);var u=c.nodeType,m=void 0;if(u===h.nodeType&&(1===u?(n?n!==o&&((d=I[n])?a===d?m=!1:(t.insertBefore(d,c),o?S(o):A(c,t,!0),c=d):m=!1):o&&(m=!1),(m=!1!==m&&s(c,h))&&T(c,h)):3!==u&&8!=u||(m=!0,c.nodeValue!==h.nodeValue&&(c.nodeValue=h.nodeValue))),m){h=l,c=a;continue t}o?S(o):A(c,t,!0),c=a}if(n&&(d=I[n])&&s(d,h))t.appendChild(d),T(d,h);else{var y=f(h);!1!==y&&(y&&(h=y),h.actualize&&(h=h.actualize(t.ownerDocument||e)),t.appendChild(h),N(h))}h=l,c=a}!function(t,e,i){for(;e;){var n=e.nextSibling;(i=p(e))?S(i):A(e,t,!0),e=n}}(t,c,o);var g=r[t.nodeName];g&&g(t,i)}(t,i):r.TEXTAREA(t,i)}!function t(e){if(1===e.nodeType||11===e.nodeType)for(var i=e.firstChild;i;){var n=p(i);n&&(I[n]=i),t(i),i=i.nextSibling}}(o);var O,L,z=o,M=z.nodeType,F=d.nodeType;if(!E)if(1===M)1===F?s(o,d)||(b(o),z=function(t,e){for(var i=t.firstChild;i;){var n=i.nextSibling;e.appendChild(i),i=n}return e}(o,(O=d.nodeName,(L=d.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==L?e.createElementNS(L,O):e.createElement(O)))):z=d;else if(3===M||8===M){if(F===M)return z.nodeValue!==d.nodeValue&&(z.nodeValue=d.nodeValue),z;z=d}if(z===d)b(o);else{if(d.isSameNode&&d.isSameNode(z))return;if(T(z,d,E),x)for(var R=0,_=x.length;R<_;R++){var W=I[x[R]];W&&A(W,W.parentNode,!1)}}return!E&&z!==o&&o.parentNode&&(z.actualize&&(z=z.actualize(o.ownerDocument||e)),o.parentNode.replaceChild(z,o)),z},h=function(){function t(e){var i=e.itemCount,n=e.itemSizeGetter,s=e.estimatedItemSize;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._itemSizeGetter=n,this._itemCount=i,this._estimatedItemSize=s,this._itemSizeAndPositionData={},this._lastMeasuredIndex=-1}return t.prototype.getLastMeasuredIndex=function(){return this._lastMeasuredIndex},t.prototype.getSizeAndPositionForIndex=function(t){if(t<0||t>=this._itemCount)throw Error("Requested index "+t+" is outside of range 0.."+this._itemCount);if(t>this._lastMeasuredIndex){for(var e=this.getSizeAndPositionOfLastMeasuredItem(),i=e.offset+e.size,n=this._lastMeasuredIndex+1;n<=t;n++){var s=this._itemSizeGetter({index:n});if(null==s||isNaN(s))throw Error("Invalid size returned for index "+n+" of value "+s);this._itemSizeAndPositionData[n]={offset:i,size:s},i+=s}this._lastMeasuredIndex=t}return this._itemSizeAndPositionData[t]},t.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this._lastMeasuredIndex>=0?this._itemSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},t.prototype.getTotalSize=function(){var t=this.getSizeAndPositionOfLastMeasuredItem();return t.offset+t.size+(this._itemCount-this._lastMeasuredIndex-1)*this._estimatedItemSize},t.prototype.getUpdatedOffsetForIndex=function(t){var e=t.align,i=void 0===e?"start":e,n=t.containerSize,s=t.targetIndex;if(n<=0)return 0;var o=this.getSizeAndPositionForIndex(s),r=o.offset,a=r-n+o.size,l=void 0;switch(i){case"end":l=a;break;case"center":l=r-(n-o.size)/2;break;default:l=r}var d=this.getTotalSize();return Math.max(0,Math.min(d-n,l))},t.prototype.getVisibleRange=function(t){var e=t.containerSize,i=t.offset,n=t.overscanCount;if(0===this.getTotalSize())return{};var s=i+e,o=this._findNearestItem(i),r=o,a=this.getSizeAndPositionForIndex(o);for(i=a.offset+a.size;i<s&&r<this._itemCount-1;)r++,i+=this.getSizeAndPositionForIndex(r).size;return n&&(o=Math.max(0,o-n),r=Math.min(r+n,this._itemCount)),{start:o,stop:r}},t.prototype.resetItem=function(t){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,t-1)},t.prototype._binarySearch=function(t){for(var e=t.low,i=t.high,n=t.offset,s=void 0,o=void 0;e<=i;){if(s=e+Math.floor((i-e)/2),(o=this.getSizeAndPositionForIndex(s).offset)===n)return s;o<n?e=s+1:o>n&&(i=s-1)}if(e>0)return e-1},t.prototype._exponentialSearch=function(t){for(var e=t.index,i=t.offset,n=1;e<this._itemCount&&this.getSizeAndPositionForIndex(e).offset<i;)e+=n,n*=2;return this._binarySearch({high:Math.min(e,this._itemCount-1),low:Math.floor(e/2),offset:i})},t.prototype._findNearestItem=function(t){if(isNaN(t))throw Error("Invalid offset "+t+" specified");t=Math.max(0,t);var e=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this._lastMeasuredIndex);return e.offset>=t?this._binarySearch({high:i,low:0,offset:t}):this._exponentialSearch({index:i,offset:t})},t}(),c=function(){function t(e,i){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getRowHeight=function(t){var e=t.index,i=n.options.rowHeight;return"function"==typeof i?i(e):Array.isArray(i)?i[e]:i},this.container=e,this.options=i,this.state={},this._initializeSizeAndPositionManager(i.rowCount),this.render=this.render.bind(this),this.handleScroll=this.handleScroll.bind(this),this.componentDidMount()}return t.prototype.componentDidMount=function(){var t=this,e=this.options,i=e.onMount,n=e.initialScrollTop,s=e.initialIndex,o=e.height,r=n||null!=s&&this.getRowOffset(s)||0,a=this.inner=document.createElement("div"),l=this.content=document.createElement("div");a.setAttribute("style","position:relative; overflow:hidden; width:100%; min-height:100%; will-change: transform;"),l.setAttribute("style","position:absolute; top:0; left:0; height:100%; width:100%; overflow:visible;"),a.appendChild(l),this.container.appendChild(a),this.setState({offset:r,height:o},(function(){r&&(t.container.scrollTop=r),t.container.addEventListener("scroll",t.handleScroll),"function"==typeof i&&i()}))},t.prototype._initializeSizeAndPositionManager=function(t){this._sizeAndPositionManager=new h({itemCount:t,itemSizeGetter:this.getRowHeight,estimatedItemSize:this.options.estimatedRowHeight||100})},t.prototype.setState=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];this.state=Object.assign(this.state,e),requestAnimationFrame((function(){t.render(),"function"==typeof i&&i()}))},t.prototype.resize=function(t,e){this.setState({height:t},e)},t.prototype.handleScroll=function(t){var e=this.options.onScroll,i=this.container.scrollTop;this.setState({offset:i}),"function"==typeof e&&e(i,t)},t.prototype.getRowOffset=function(t){return this._sizeAndPositionManager.getSizeAndPositionForIndex(t).offset},t.prototype.scrollToIndex=function(t,e){var i=this.state.height,n=this._sizeAndPositionManager.getUpdatedOffsetForIndex({align:e,containerSize:i,targetIndex:t});this.container.scrollTop=n},t.prototype.setRowCount=function(t){this._initializeSizeAndPositionManager(t),this.render()},t.prototype.onRowsRendered=function(t){var e=this.options.onRowsRendered;"function"==typeof e&&e(t)},t.prototype.destroy=function(){this.container.removeEventListener("scroll",this.handleScroll),this.container.innerHTML=""},t.prototype.render=function(){for(var t=this.options,e=t.overscanCount,i=t.renderRow,n=this.state,s=n.height,o=n.offset,r=void 0===o?0:o,a=this._sizeAndPositionManager.getVisibleRange({containerSize:s,offset:r,overscanCount:e}),l=a.start,h=a.stop,c=document.createDocumentFragment(),u=l;u<=h;u++)c.appendChild(i(u));this.inner.style.height=this._sizeAndPositionManager.getTotalSize()+"px",this.content.style.top=this.getRowOffset(l)+"px",d(this.content,c,{childrenOnly:!0,getNodeKey:function(t){return t.nodeIndex}}),this.onRowsRendered({startIndex:l,stopIndex:h})},t}();return class{#t=null;#e=null;#i=null;#n=null;#s=null;#o=null;#r="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>";#a=null;#l=null;#d=null;#h=null;#c="";#u=[];#p={selectedFlagImage:!0,selectedCountryClearable:!0,searchClearable:!0,optionFlagImage:!0,detectCountryByIp:!1,detectCountryByGeo:!1,defaultValue:"",placeholder:"Select a Country",searchPlaceholder:"Search Country",noCountryFoundText:"No Currency Found",maxHeight:370,document:{},window:{},options:[],attributes:{},classNames:{},assetsURL:"",onChange:t=>{}};#f=null;#m="";#y=[];constructor(t,e){Object.assign(this.#p,e),this.#t="string"==typeof t?this.#p.document.querySelector(t):t,this.#u=[...this.#p.options],this.fieldKey=this.#p.fieldKey,this.init()}init(){var t;this.#e=this.#g(`.${this.fieldKey}-country-hidden-input`),this.#i=this.#g(`.${this.fieldKey}-dpd-wrp`),this.#n=this.#g(`.${this.fieldKey}-selected-country-img`),this.#a=this.#g(`.${this.fieldKey}-opt-search-input`),this.#l=this.#g(`.${this.fieldKey}-search-clear-btn`),this.#d=this.#g(`.${this.fieldKey}-option-wrp`),this.#h=this.#g(`.${this.fieldKey}-option-list`),this.#p.detectCountryByIp&&this.#C(),this.#p.detectCountryByGeo&&this.#b(),this.#p.defaultValue&&this.setSelectedCountryItem(this.#p.defaultValue),this.#v(),this.#E(),this.#I(),this.#p.selectedFlagImage||null===(t=this.#n)||void 0===t||t.remove(),this.#p.searchClearable&&(this.#a.style.paddingRight="25px",this.#l.style.display="none")}#E(){this.#x(this.#i,"click",(t=>{this.#S(t)})),this.#x(this.#i,"keyup",(t=>{this.#S(t)})),this.#x(this.#t,"keydown",(t=>{this.#w(t)})),this.#p.searchClearable&&this.#x(this.#l,"click",(()=>{this.searchOptions("")})),this.#x(this.#a,"keyup",(t=>{this.#A(t)})),function(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=Object.getPrototypeOf(t);if(Object.prototype.hasOwnProperty.call(s,e)){const o=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{configurable:!0,get(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return o.get.apply(this,e)},set(){const t=this[e];for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];o.set.apply(this,r);const l=this[e];return"function"==typeof i&&setTimeout(i.bind(this,t,l),n),l}})}}(this.#e,"value",((t,e)=>{this.#N(t,e)}))}#v(){const t=this.#e.name,e=decodeURIComponent(`${document.URL}`.replace(/\+/g,"%20")).replace(new RegExp(`.*${t}=([^&]*).*|(.*)`),"$1");e&&this.#N("",e)}#g(t){return this.#t.querySelector(t)}#x(t,e,i){t.addEventListener(e,i),this.#y.push({selector:t,eventType:e,cb:i})}#C(){fetch("https://www.cloudflare.com/cdn-cgi/trace").then((t=>t.text())).then((t=>{const e=t.trim().split("\n").reduce(((t,e)=>([key,value]=e.split("="),t[key]=value,t)),{});this.setSelectedCountryItem(null==e?void 0:e.loc)}))}#b(){navigator.geolocation.getCurrentPosition((t=>{const{latitude:e,longitude:i}=t.coords;fetch(`http://api.geonames.org/countryCodeJSON?username=bitcodezoho1&lat=${e}&lng=${i}`).then((t=>t.json())).then((t=>{this.setSelectedCountryItem(t.countryCode)}))}))}#w(t){const e=this.#p.document.activeElement;let i=null;if(this.#T()){const o=Number(e.dataset.index||-1);if("ArrowDown"===t.key||!t.shiftKey&&"Tab"===t.key){if(t.preventDefault(),e===this.#a)i=this.#g(`.${this.fieldKey}-option:not(.disabled-opt)`);else if(e.classList.contains("option")){const t=this.#O(o,"next"),e=this.#L(t);if(e)i=e;else if(t+1<this.#u.length){var n;null===(n=this.virtualOptionList)||void 0===n||n.scrollToIndex(t,"center"),setTimeout((()=>{const e=this.#L(t);e&&e.focus()}),0)}}}else if("ArrowUp"===t.key||t.shiftKey&&"Tab"===t.key){if(t.preventDefault(),e===this.#a)i=this.#i,this.#T()&&this.setMenu({open:!1});else if(e.classList.contains("option")){const t=this.#O(o,"previous"),e=this.#L(t);if(e)i=e;else if(t>0){var s;null===(s=this.virtualOptionList)||void 0===s||s.scrollToIndex(t,"center"),setTimeout((()=>{const e=this.#L(t);e&&e.focus()}),0)}else e||(i=this.#a)}}else"Escape"===t.key&&this.setMenu({open:!1})}else if(t.key>="a"&&t.key<="z"){clearTimeout(this.#f),this.#m+=t.key,this.#f=setTimeout((()=>{this.#m=""}),300);const e=this.#p.options.find((t=>!t.disabled&&t.lbl.toLowerCase().startsWith(this.#m)));e&&this.setSelectedCountryItem(e.i)}else if("ArrowDown"===t.key||"ArrowUp"===t.key){const e=this.#z(),i="ArrowDown"===t.key?"next":"previous",n=this.#O(e,i);n>-1&&n<this.#p.options.length&&(this.value=this.#p.options[n].val)}i&&i.focus()}#L(t){return this.#g(`.${this.fieldKey}-option-list .${this.fieldKey}-option[data-index="${t}"]`)}#O(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1?arguments[1]:void 0;if("next"===e){const e=this.#p.options.length;for(let i=t+1;i<e;i+=1)if(!this.#p.options[i].disabled)return i}else if("previous"===e)for(let e=t-1;e>=0;e-=1)if(!this.#p.options[e].disabled)return e}#N(t,e){const i=this.#p.options.find((t=>t.val===e));i&&t!==e&&this.setSelectedCountryItem(i.i)}#M(t){t.stopPropagation(),this.#c="",this.#p.selectedFlagImage&&(this.#n.src=this.#r),this.#F(this.#s,this.#p.placeholder),this.#p.selectedCountryClearable&&(this.#o.style.display="none"),this.#R(this.#i,"aria-label","Selected country cleared"),this.#i.focus(),this.value="",setTimeout((()=>{this.#R(this.#i,"aria-label",this.#p.placeholder)}),100),this.#_()}setSelectedCountryItem(t){if(this.#c=t,!this.#c)return;const e=this.#W();e&&(this.#s=this.#g(`.${this.fieldKey}-selected-country-lbl`),this.#o=this.#p.selectedCountryClearable?this.#g(`.${this.fieldKey}-inp-clr-btn`):{},this.#p.selectedFlagImage&&this.#n&&(this.#n.src=`${this.#p.assetsURL}${e.img}`),this.#F(this.#s,e.lbl),this.setMenu({open:!1}),this.value=e.val,this.#p.selectedCountryClearable&&(this.#o.style.display="grid",this.#x(this.#o,"click",(t=>{this.#M(t)}))),this.#p.onChange&&this.#p.onChange(e.val),this.#R(this.#i,"aria-label",`${e.lbl} selected`),setTimeout((()=>{this.#R(this.#i,"aria-label",e.lbl)}),100))}#z(){return this.#u.findIndex((t=>t.i===this.#c))}#W(){return this.#p.options.find((t=>t.i===this.#c))}#k(t){return this.#p.document.createElement(t)}#P(t,e){t.classList.add(e)}#F(t,e){t.textContent=e}#R(t,e,i){var n;null==t||null===(n=t.setAttribute)||void 0===n||n.call(t,e,i)}#_(){var t,e;null===(t=this.virtualOptionList)||void 0===t||t.setRowCount(this.#u.length);const i=this.#z();null===(e=this.virtualOptionList)||void 0===e||e.scrollToIndex(-1===i?0:i)}#B(t,e){const i=Object.keys(e),n=i.length;if(n)for(let s=0;s<n;s+=1)this.#R(t,i[s],e[i[s]])}#I(){const t=this.#z();this.virtualOptionList=new c(this.#h,{height:this.#p.maxHeight,rowCount:this.#u.length,rowHeight:31,initialIndex:-1===t?0:t,renderRow:t=>{const e=this.#u[t],i=this.#k("li");if(this.#R(i,"data-key",e.i),this.#R(i,"data-index",t),"option"in this.#p.attributes){const t=this.#p.attributes.option;this.#B(i,t)}if(!e.i)return this.#F(i,e.lbl),this.#P(i,"opt-not-found"),i;if(this.#P(i,`${this.fieldKey}-option`),"option"in this.#p.classNames){const t=this.#p.classNames.option;t&&this.#P(i,t)}const n=this.#k("span");if(this.#P(n,`${this.fieldKey}-opt-lbl-wrp`),"opt-lbl-wrp"in this.#p.classNames){const t=this.#p.classNames["opt-lbl-wrp"];t&&this.#P(n,t)}if("opt-lbl-wrp"in this.#p.attributes){const t=this.#p.attributes["opt-lbl-wrp"];this.#B(n,t)}if(this.#p.optionFlagImage){const t=this.#k("img");if("opt-icn"in this.#p.attributes){const t=this.#p.attributes["opt-icn"];t&&this.#B(n,t)}if(this.#P(t,`${this.fieldKey}-opt-icn`),"opt-icn"in this.#p.classNames){const e=this.#p.classNames["opt-icn"];e&&this.#P(t,e)}t.src=`${this.#p.assetsURL}${e.img}`,t.alt=`${e.lbl} flag image`,t.loading="lazy",this.#R(t,"aria-hidden",!0),n.append(t)}const s=this.#k("span");if("opt-lbl"in this.#p.attributes){const t=this.#p.attributes["opt-lbl"];this.#B(n,t)}if(this.#P(s,`${this.fieldKey}-opt-lbl`),"opt-lbl"in this.#p.classNames){const t=this.#p.classNames["opt-lbl"];t&&this.#P(s,t)}this.#F(s,e.lbl),n.append(s);const o=this.#k("span");return this.#P(o,"opt-prefix"),this.#F(o,e.code),i.tabIndex=this.#T()?"0":"-1",this.#R(i,"role","option"),this.#R(i,"aria-posinset",t+1),this.#R(i,"aria-setsize",this.#u.length),this.#x(i,"click",(t=>{this.setSelectedCountryItem(t.currentTarget.dataset.key)})),this.#x(i,"keyup",(t=>{"Enter"===t.key&&this.setSelectedCountryItem(t.currentTarget.dataset.key)})),e.disabled&&this.#P(i,"disabled-opt"),i.append(n,o),this.#c===e.i?(this.#P(i,"selected-opt"),this.#R(i,"aria-selected",!0)):this.#R(i,"aria-selected",!1),i}})}#A(t){if("Enter"===t.key&&this.#u.length){var e;const t=null===(e=this.#u)||void 0===e?void 0:e[0].i;t&&(this.setSelectedCountryItem(t),this.searchOptions(""))}else this.searchOptions(t.target.value)}searchOptions(t){this.#$(t);let e=[];t?(e=this.#p.options.filter((e=>e.lbl.toLowerCase().includes(t.toLowerCase()))),e.length||(e=[{i:0,lbl:this.#p.noCountryFoundText}]),this.#u=e,this.#p.searchClearable&&(this.#l.style.display="grid")):(this.#u=this.#p.options,this.#p.searchClearable&&(this.#l.style.display="none")),this.#_()}#$(t){this.#a.value=t}#D(t){this.#t.contains(t.target)||this.setMenu({open:!1})}#T(){return this.#t.classList.contains(`${this.fieldKey}-menu-open`)}#H(){const t=window,e=this.#i.getBoundingClientRect(),i=e.top,n=t.innerHeight-e.bottom;n<i&&n<this.#p.maxHeight?(this.#t.style.flexDirection="column-reverse",this.#t.style.bottom="0%"):(this.#t.style.flexDirection="column",this.#t.style.removeProperty("bottom"))}setMenu(t){let{open:e}=t;this.#d.style.maxHeight=`${e?this.#p.maxHeight:0}px`,e?(this.#H(),this.#t.classList.add(`${this.fieldKey}-menu-open`),this.#x(this.#p.document,"click",(t=>this.#D(t))),this.#a.tabIndex="0",this.#l.tabIndex="0",this.#i.setAttribute("aria-expanded","true"),this.#R(this.#h,"aria-hidden",!1),this.#R(this.#a,"aria-hidden",!1),this.#_()):(this.#t.classList.remove(`${this.fieldKey}-menu-open`),this.#p.document.removeEventListener("click",this.#D),this.searchOptions(""),this.#a.blur(),this.#a.tabIndex="-1",this.#l.tabIndex="-1",this.#i.setAttribute("aria-expanded","false"),this.#R(this.#h,"aria-hidden",!0),this.#R(this.#a,"aria-hidden",!0))}#S(t){"Space"===t.code&&(this.#a.focus(),this.setMenu({open:!0})),"click"===t.type&&(this.#T()?this.setMenu({open:!1}):(this.#a.focus(),this.setMenu({open:!0})))}set disabled(t){"true"===String(t).toLowerCase()?(this.#t.classList.add("disabled"),this.#e.disabled=!0,this.#i.tabIndex="-1",this.#o.tabIndex="-1",this.#R(this.#i,"aria-label","Country Field disabled"),this.setMenu({open:!1})):"false"===String(t).toLowerCase()&&(this.#t.classList.remove("disabled"),this.#e.removeAttribute("disabled"),this.#i.tabIndex="0",this.#o.tabIndex="0",this.#R(this.#i,"aria-label",this.#p.placeholder))}get disabled(){return this.#e.disabled}set readonly(t){"true"===String(t).toLowerCase()?(this.#t.classList.add("disabled"),this.#e.readOnly=!0,this.#i.tabIndex="-1",this.#o.tabIndex="-1",this.setMenu({open:!1})):"false"===String(t).toLowerCase()&&(this.#t.classList.remove("disabled"),this.#e.removeAttribute("readonly"),this.#i.tabIndex="0",this.#o.tabIndex="0")}get readonly(){return this.#e.readOnly}set value(t){this.#e.value=t}get value(){var t;return null===(t=this.#W())||void 0===t?void 0:t.val}#K(){this.#y.forEach((t=>{let{selector:e,eventType:i,cb:n}=t;e.removeEventListener(i,n)}))}destroy(){this.#h.innerHTML="",this.value="",this.#K()}}}));
