!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["bf_bit_country-field"]=t():e["bf_bit_country-field"]=t()}(self,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>y});var i;var n="undefined"==typeof document?void 0:document,s=!!n&&"content"in n.createElement("template"),o=!!n&&n.createRange&&"createContextualFragment"in n.createRange();function r(e){return e=e.trim(),s?function(e){var t=n.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(e):o?function(e){return i||(i=n.createRange()).selectNode(n.body),i.createContextualFragment(e).childNodes[0]}(e):function(e){var t=n.createElement("body");return t.innerHTML=e,t.childNodes[0]}(e)}function a(e,t){var i,n,s=e.nodeName,o=t.nodeName;return s===o||(i=s.charCodeAt(0),n=o.charCodeAt(0),i<=90&&n>=97?s===o.toUpperCase():n<=90&&i>=97&&o===s.toUpperCase())}function l(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}var d={OPTION:function(e,t){var i=e.parentNode;if(i){var n=i.nodeName.toUpperCase();"OPTGROUP"===n&&(n=(i=i.parentNode)&&i.nodeName.toUpperCase()),"SELECT"!==n||i.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),i.selectedIndex=-1)}l(e,t,"selected")},INPUT:function(e,t){l(e,t,"checked"),l(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var i=t.value;e.value!==i&&(e.value=i);var n=e.firstChild;if(n){var s=n.nodeValue;if(s==i||!i&&s==e.placeholder)return;n.nodeValue=i}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var i,n,s=-1,o=0,r=e.firstChild;r;)if("OPTGROUP"===(n=r.nodeName&&r.nodeName.toUpperCase()))r=(i=r).firstChild;else{if("OPTION"===n){if(r.hasAttribute("selected")){s=o;break}o++}!(r=r.nextSibling)&&i&&(r=i.nextSibling,i=null)}e.selectedIndex=s}}};function h(){}function c(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}var u=function(e){return function(t,i,s){if(s||(s={}),"string"==typeof i)if("#document"===t.nodeName||"HTML"===t.nodeName||"BODY"===t.nodeName){var o=i;(i=n.createElement("html")).innerHTML=o}else i=r(i);var l=s.getNodeKey||c,u=s.onBeforeNodeAdded||h,p=s.onNodeAdded||h,f=s.onBeforeElUpdated||h,m=s.onElUpdated||h,y=s.onBeforeNodeDiscarded||h,g=s.onNodeDiscarded||h,v=s.onBeforeElChildrenUpdated||h,b=!0===s.childrenOnly,C=Object.create(null),E=[];function I(e){E.push(e)}function x(e,t){if(1===e.nodeType)for(var i=e.firstChild;i;){var n=void 0;t&&(n=l(i))?I(n):(g(i),i.firstChild&&x(i,t)),i=i.nextSibling}}function S(e,t,i){!1!==y(e)&&(t&&t.removeChild(e),g(e),x(e,i))}function w(e){p(e);for(var t=e.firstChild;t;){var i=t.nextSibling,n=l(t);if(n){var s=C[n];s&&a(t,s)?(t.parentNode.replaceChild(s,t),A(s,t)):w(t)}else w(t);t=i}}function A(t,i,s){var o=l(i);if(o&&delete C[o],!s){if(!1===f(t,i))return;if(e(t,i),m(t),!1===v(t,i))return}"TEXTAREA"!==t.nodeName?function(e,t){var i,s,o,r,h,c=t.firstChild,p=e.firstChild;e:for(;c;){for(r=c.nextSibling,i=l(c);p;){if(o=p.nextSibling,c.isSameNode&&c.isSameNode(p)){c=r,p=o;continue e}s=l(p);var f=p.nodeType,m=void 0;if(f===c.nodeType&&(1===f?(i?i!==s&&((h=C[i])?o===h?m=!1:(e.insertBefore(h,p),s?I(s):S(p,e,!0),p=h):m=!1):s&&(m=!1),(m=!1!==m&&a(p,c))&&A(p,c)):3!==f&&8!=f||(m=!0,p.nodeValue!==c.nodeValue&&(p.nodeValue=c.nodeValue))),m){c=r,p=o;continue e}s?I(s):S(p,e,!0),p=o}if(i&&(h=C[i])&&a(h,c))e.appendChild(h),A(h,c);else{var y=u(c);!1!==y&&(y&&(c=y),c.actualize&&(c=c.actualize(e.ownerDocument||n)),e.appendChild(c),w(c))}c=r,p=o}!function(e,t,i){for(;t;){var n=t.nextSibling;(i=l(t))?I(i):S(t,e,!0),t=n}}(e,p,s);var g=d[e.nodeName];g&&g(e,t)}(t,i):d.TEXTAREA(t,i)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var i=t.firstChild;i;){var n=l(i);n&&(C[n]=i),e(i),i=i.nextSibling}}(t);var T,O,N=t,L=N.nodeType,z=i.nodeType;if(!b)if(1===L)1===z?a(t,i)||(g(t),N=function(e,t){for(var i=e.firstChild;i;){var n=i.nextSibling;t.appendChild(i),i=n}return t}(t,(T=i.nodeName,(O=i.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==O?n.createElementNS(O,T):n.createElement(T)))):N=i;else if(3===L||8===L){if(z===L)return N.nodeValue!==i.nodeValue&&(N.nodeValue=i.nodeValue),N;N=i}if(N===i)g(t);else{if(i.isSameNode&&i.isSameNode(N))return;if(A(N,i,b),E)for(var M=0,_=E.length;M<_;M++){var F=C[E[M]];F&&S(F,F.parentNode,!1)}}return!b&&N!==t&&t.parentNode&&(N.actualize&&(N=N.actualize(t.ownerDocument||n)),t.parentNode.replaceChild(N,t)),N}}((function(e,t){var i,n,s,o,r=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var a=r.length-1;a>=0;a--)n=(i=r[a]).name,s=i.namespaceURI,o=i.value,s?(n=i.localName||n,e.getAttributeNS(s,n)!==o&&("xmlns"===i.prefix&&(n=i.name),e.setAttributeNS(s,n,o))):e.getAttribute(n)!==o&&e.setAttribute(n,o);for(var l=e.attributes,d=l.length-1;d>=0;d--)n=(i=l[d]).name,(s=i.namespaceURI)?(n=i.localName||n,t.hasAttributeNS(s,n)||e.removeAttributeNS(s,n)):t.hasAttribute(n)||e.removeAttribute(n)}}));const p=u;var f=function(){function e(t){var i=t.itemCount,n=t.itemSizeGetter,s=t.estimatedItemSize;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._itemSizeGetter=n,this._itemCount=i,this._estimatedItemSize=s,this._itemSizeAndPositionData={},this._lastMeasuredIndex=-1}return e.prototype.getLastMeasuredIndex=function(){return this._lastMeasuredIndex},e.prototype.getSizeAndPositionForIndex=function(e){if(e<0||e>=this._itemCount)throw Error("Requested index "+e+" is outside of range 0.."+this._itemCount);if(e>this._lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),i=t.offset+t.size,n=this._lastMeasuredIndex+1;n<=e;n++){var s=this._itemSizeGetter({index:n});if(null==s||isNaN(s))throw Error("Invalid size returned for index "+n+" of value "+s);this._itemSizeAndPositionData[n]={offset:i,size:s},i+=s}this._lastMeasuredIndex=e}return this._itemSizeAndPositionData[e]},e.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this._lastMeasuredIndex>=0?this._itemSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this._itemCount-this._lastMeasuredIndex-1)*this._estimatedItemSize},e.prototype.getUpdatedOffsetForIndex=function(e){var t=e.align,i=void 0===t?"start":t,n=e.containerSize,s=e.targetIndex;if(n<=0)return 0;var o=this.getSizeAndPositionForIndex(s),r=o.offset,a=r-n+o.size,l=void 0;switch(i){case"end":l=a;break;case"center":l=r-(n-o.size)/2;break;default:l=r}var d=this.getTotalSize();return Math.max(0,Math.min(d-n,l))},e.prototype.getVisibleRange=function(e){var t=e.containerSize,i=e.offset,n=e.overscanCount;if(0===this.getTotalSize())return{};var s=i+t,o=this._findNearestItem(i),r=o,a=this.getSizeAndPositionForIndex(o);for(i=a.offset+a.size;i<s&&r<this._itemCount-1;)r++,i+=this.getSizeAndPositionForIndex(r).size;return n&&(o=Math.max(0,o-n),r=Math.min(r+n,this._itemCount)),{start:o,stop:r}},e.prototype.resetItem=function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)},e.prototype._binarySearch=function(e){for(var t=e.low,i=e.high,n=e.offset,s=void 0,o=void 0;t<=i;){if(s=t+Math.floor((i-t)/2),(o=this.getSizeAndPositionForIndex(s).offset)===n)return s;o<n?t=s+1:o>n&&(i=s-1)}if(t>0)return t-1},e.prototype._exponentialSearch=function(e){for(var t=e.index,i=e.offset,n=1;t<this._itemCount&&this.getSizeAndPositionForIndex(t).offset<i;)t+=n,n*=2;return this._binarySearch({high:Math.min(t,this._itemCount-1),low:Math.floor(t/2),offset:i})},e.prototype._findNearestItem=function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch({high:i,low:0,offset:e}):this._exponentialSearch({index:i,offset:e})},e}();const m=function(){function e(t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getRowHeight=function(e){var t=e.index,i=n.options.rowHeight;return"function"==typeof i?i(t):Array.isArray(i)?i[t]:i},this.container=t,this.options=i,this.state={},this._initializeSizeAndPositionManager(i.rowCount),this.render=this.render.bind(this),this.handleScroll=this.handleScroll.bind(this),this.componentDidMount()}return e.prototype.componentDidMount=function(){var e=this,t=this.options,i=t.onMount,n=t.initialScrollTop,s=t.initialIndex,o=t.height,r=n||null!=s&&this.getRowOffset(s)||0,a=this.inner=document.createElement("div"),l=this.content=document.createElement("div");a.setAttribute("style","position:relative; overflow:hidden; width:100%; min-height:100%; will-change: transform;"),l.setAttribute("style","position:absolute; top:0; left:0; height:100%; width:100%; overflow:visible;"),a.appendChild(l),this.container.appendChild(a),this.setState({offset:r,height:o},(function(){r&&(e.container.scrollTop=r),e.container.addEventListener("scroll",e.handleScroll),"function"==typeof i&&i()}))},e.prototype._initializeSizeAndPositionManager=function(e){this._sizeAndPositionManager=new f({itemCount:e,itemSizeGetter:this.getRowHeight,estimatedItemSize:this.options.estimatedRowHeight||100})},e.prototype.setState=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];this.state=Object.assign(this.state,t),requestAnimationFrame((function(){e.render(),"function"==typeof i&&i()}))},e.prototype.resize=function(e,t){this.setState({height:e},t)},e.prototype.handleScroll=function(e){var t=this.options.onScroll,i=this.container.scrollTop;this.setState({offset:i}),"function"==typeof t&&t(i,e)},e.prototype.getRowOffset=function(e){return this._sizeAndPositionManager.getSizeAndPositionForIndex(e).offset},e.prototype.scrollToIndex=function(e,t){var i=this.state.height,n=this._sizeAndPositionManager.getUpdatedOffsetForIndex({align:t,containerSize:i,targetIndex:e});this.container.scrollTop=n},e.prototype.setRowCount=function(e){this._initializeSizeAndPositionManager(e),this.render()},e.prototype.onRowsRendered=function(e){var t=this.options.onRowsRendered;"function"==typeof t&&t(e)},e.prototype.destroy=function(){this.container.removeEventListener("scroll",this.handleScroll),this.container.innerHTML=""},e.prototype.render=function(){for(var e=this.options,t=e.overscanCount,i=e.renderRow,n=this.state,s=n.height,o=n.offset,r=void 0===o?0:o,a=this._sizeAndPositionManager.getVisibleRange({containerSize:s,offset:r,overscanCount:t}),l=a.start,d=a.stop,h=document.createDocumentFragment(),c=l;c<=d;c++)h.appendChild(i(c));this.inner.style.height=this._sizeAndPositionManager.getTotalSize()+"px",this.content.style.top=this.getRowOffset(l)+"px",p(this.content,h,{childrenOnly:!0,getNodeKey:function(e){return e.nodeIndex}}),this.onRowsRendered({startIndex:l,stopIndex:d})},e}();class y{#e=null;#t=null;#i=null;#n=null;#s=null;#o=null;#r="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>";#a=null;#l=null;#d=null;#h=null;#c="";#u=[];#p={selectedFlagImage:!0,selectedCountryClearable:!0,searchClearable:!0,optionFlagImage:!0,detectCountryByIp:!1,detectCountryByGeo:!1,defaultValue:"",placeholder:"Select a Country",searchPlaceholder:"Search Country",noCountryFoundText:"No Currency Found",maxHeight:370,options:[],onChange:e=>{console.log(e)}};#f=null;#m="";#y=[];constructor(e,t){Object.assign(this.#p,t),this.#e="string"==typeof e?document.querySelector(e):e,this.#u=[...this.#p.options],this.fieldKey=this.#p.fieldKey,this.init()}init(){var e;(this.#t=this.#g(`.${this.fieldKey}-country-hidden-input`),this.#i=this.#g(`.${this.fieldKey}-dpd-wrp`),this.#n=this.#g(`.${this.fieldKey}-selected-country-img`),this.#a=this.#g(`.${this.fieldKey}-opt-search-input`),this.#l=this.#g(`.${this.fieldKey}-search-clear-btn`),this.#d=this.#g(`.${this.fieldKey}-option-wrp`),this.#h=this.#g(`.${this.fieldKey}-option-list`),this.#p.detectCountryByIp&&this.#v(),this.#p.detectCountryByGeo&&this.#b(),this.#p.defaultValue&&this.setSelectedCountryItem(this.#p.defaultValue),this.#C(),this.#E(),this.#I(),this.#p.selectedFlagImage)||(null===(e=this.#n)||void 0===e||e.remove());this.#p.searchClearable&&(this.#a.style.paddingRight="25px",this.#l.style.display="none")}#E(){this.#x(this.#i,"click",(e=>{this.#S(e)})),this.#x(this.#i,"keyup",(e=>{this.#S(e)})),this.#x(this.#e,"keydown",(e=>{this.#w(e)})),this.#p.searchClearable&&this.#x(this.#l,"click",(()=>{this.searchOptions("")})),this.#x(this.#a,"keyup",(e=>{this.#A(e)})),function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=Object.getPrototypeOf(e);if(Object.prototype.hasOwnProperty.call(s,t)){const o=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,{configurable:!0,get(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o.get.apply(this,t)},set(){const e=this[t];for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];o.set.apply(this,r);const l=this[t];return"function"==typeof i&&setTimeout(i.bind(this,e,l),n),l}})}}(this.#t,"value",((e,t)=>{this.#T(e,t)}))}#C(){const e=this.#t.name,t=decodeURIComponent(`${document.URL}`.replace(/\+/g,"%20")).replace(new RegExp(`.*${e}=([^&]*).*|(.*)`),"$1");t&&this.#T("",t)}#g(e){return this.#e.querySelector(e)}#x(e,t,i){e.addEventListener(t,i),this.#y.push({selector:e,eventType:t,cb:i})}#v(){fetch("https://www.cloudflare.com/cdn-cgi/trace").then((e=>e.text())).then((e=>{const t=e.trim().split("\n").reduce(((e,t)=>(e[(t=t.split("="))[0]]=t[1],e)),{});this.setSelectedCountryItem(null==t?void 0:t.loc)}))}#b(){navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:i}=e.coords;fetch(`http://api.geonames.org/countryCodeJSON?username=bitcodezoho1&lat=${t}&lng=${i}`).then((e=>e.json())).then((e=>{this.setSelectedCountryItem(e.countryCode)}))}))}#w(e){const t=document.activeElement;let i=null;if(this.#O()){const o=Number(t.dataset.index||-1);if("ArrowDown"===e.key||!e.shiftKey&&"Tab"===e.key){if(e.preventDefault(),t===this.#a)i=this.#g(`.${this.fieldKey}-option:not(.disabled-opt)`);else if(t.classList.contains("option")){const e=this.#N(o,"next"),t=this.#L(e);if(t)i=t;else if(e+1<this.#u.length){var n;null===(n=this.virtualOptionList)||void 0===n||n.scrollToIndex(e,"center"),setTimeout((()=>{const t=this.#L(e);t&&t.focus()}),0)}}}else if("ArrowUp"===e.key||e.shiftKey&&"Tab"===e.key){if(e.preventDefault(),t===this.#a)i=this.#i,this.#O()&&this.setMenu({open:!1});else if(t.classList.contains("option")){const e=this.#N(o,"previous"),t=this.#L(e);if(t)i=t;else if(e>0){var s;null===(s=this.virtualOptionList)||void 0===s||s.scrollToIndex(e,"center"),setTimeout((()=>{const t=this.#L(e);t&&t.focus()}),0)}else t||(i=this.#a)}}else"Escape"===e.key&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(this.#f),this.#m+=e.key,this.#f=setTimeout((()=>{this.#m=""}),300);const t=this.#p.options.find((e=>!e.disabled&&e.lbl.toLowerCase().startsWith(this.#m)));t&&this.setSelectedCountryItem(t.i)}else if("ArrowDown"===e.key||"ArrowUp"===e.key){const t=this.#z(),i="ArrowDown"===e.key?"next":"previous",n=this.#N(t,i);n>-1&&n<this.#p.options.length&&(this.value=this.#p.options[n].val)}i&&i.focus()}#L(e){return this.#g(`.${this.fieldKey}-option-list .${this.fieldKey}-option[data-index="${e}"]`)}#N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;if("next"===t){const t=this.#p.options.length;for(let i=e+1;i<t;i++){if(!this.#p.options[i].disabled)return i}}else if("previous"===t)for(let t=e-1;t>=0;t--){if(!this.#p.options[t].disabled)return t}}#T(e,t){const i=this.#p.options.find((e=>e.val===t));i&&e!==t&&this.setSelectedCountryItem(i.i)}#M(e){e.stopPropagation(),this.#c="",this.#p.selectedFlagImage&&(this.#n.src=this.#r),this.#_(this.#s,this.#p.placeholder),this.#p.selectedCountryClearable&&(this.#o.style.display="none"),this.#F(this.#i,"aria-label","Selected country cleared"),this.#i.focus(),this.value="",setTimeout((()=>{this.#F(this.#i,"aria-label",this.#p.placeholder)}),100),this.#P()}setSelectedCountryItem(e){if(this.#c=e,!this.#c)return;const t=this.#R();t&&(this.#s=this.#g(`.${this.fieldKey}-selected-country-lbl`),this.#o=this.#p.selectedCountryClearable?this.#g(`.${this.fieldKey}-inp-clr-btn`):{},this.#p.selectedFlagImage&&this.#n&&(this.#n.src=`${bits.assetsURL}${t.img}`),this.#_(this.#s,t.lbl),this.setMenu({open:!1}),this.value=t.val,this.#p.selectedCountryClearable&&(this.#o.style.display="grid",this.#x(this.#o,"click",(e=>{this.#M(e)}))),this.#p.onChange&&this.#p.onChange(t.val),this.#F(this.#i,"aria-label",`${t.lbl} selected`),setTimeout((()=>{this.#F(this.#i,"aria-label",t.lbl)}),100))}#z(){return this.#u.findIndex((e=>e.i===this.#c))}#R(){return this.#p.options.find((e=>e.i===this.#c))}#W(e){return document.createElement(e)}#k(e,t){e.classList.add(t)}#_(e,t){e.textContent=t}#F(e,t,i){var n;null==e||null===(n=e.setAttribute)||void 0===n||n.call(e,t,i)}#P(){var e,t;null===(e=this.virtualOptionList)||void 0===e||e.setRowCount(this.#u.length);const i=this.#z();null===(t=this.virtualOptionList)||void 0===t||t.scrollToIndex(-1===i?0:i)}#I(){const e=this.#z();this.virtualOptionList=new m(this.#h,{height:this.#p.maxHeight,rowCount:this.#u.length,rowHeight:31,initialIndex:-1===e?0:e,renderRow:e=>{const t=this.#u[e],i=this.#W("li");if(this.#F(i,"data-key",t.i),this.#F(i,"data-index",e),this.#F(i,"data-dev-option",this.fieldKey),!t.i)return this.#_(i,t.lbl),this.#k(i,"opt-not-found"),i;this.#k(i,`${this.fieldKey}-option`);const n=this.#W("span");if(this.#k(n,`${this.fieldKey}-opt-lbl-wrp`),this.#F(n,"data-dev-opt-lbl-wrp",this.fieldKey),this.#p.optionFlagImage){const e=this.#W("img");this.#F(e,"data-dev-opt-icn",this.fieldKey),this.#k(e,`${this.fieldKey}-opt-icn`),e.src=`${bits.assetsURL}${t.img}`,e.alt=`${t.lbl} flag image`,e.loading="lazy",this.#F(e,"aria-hidden",!0),n.append(e)}const s=this.#W("span");this.#F(s,"data-dev-opt-lbl",this.fieldKey),this.#k(s,`${this.fieldKey}-opt-lbl`),this.#_(s,t.lbl),n.append(s);const o=this.#W("span");return this.#k(o,"opt-prefix"),this.#_(o,t.code),i.tabIndex=this.#O()?"0":"-1",this.#F(i,"role","option"),this.#F(i,"aria-posinset",e+1),this.#F(i,"aria-setsize",this.#u.length),this.#x(i,"click",(e=>{this.setSelectedCountryItem(e.currentTarget.dataset.key)})),this.#x(i,"keyup",(e=>{"Enter"===e.key&&this.setSelectedCountryItem(e.currentTarget.dataset.key)})),t.disabled&&this.#k(i,"disabled-opt"),i.append(n,o),this.#c===t.i?(this.#k(i,"selected-opt"),this.#F(i,"aria-selected",!0)):this.#F(i,"aria-selected",!1),i}})}#A(e){if("Enter"===e.key&&this.#u.length){var t;const e=null===(t=this.#u)||void 0===t?void 0:t[0].i;e&&(this.setSelectedCountryItem(e),this.searchOptions(""))}else this.searchOptions(e.target.value)}searchOptions(e){this.#B(e);let t=[];e?(t=this.#p.options.filter((t=>t.lbl.toLowerCase().includes(e.toLowerCase()))),t.length||(t=[{i:0,lbl:this.#p.noCountryFoundText}]),this.#u=t,this.#p.searchClearable&&(this.#l.style.display="grid")):(this.#u=this.#p.options,this.#p.searchClearable&&(this.#l.style.display="none")),this.#P()}#B(e){this.#a.value=e}#$(e){this.#e.contains(e.target)||this.setMenu({open:!1})}#O(){return this.#e.classList.contains(`${this.fieldKey}-menu-open`)}#K(){const e=document.getElementById("bit-grid-layout").contentWindow,t=this.#i.getBoundingClientRect(),i=t.top,n=e.innerHeight-t.bottom;n<i&&n<this.#p.maxHeight?(this.#e.style.flexDirection="column-reverse",this.#e.style.bottom="0%"):(this.#e.style.flexDirection="column",this.#e.style.removeProperty("bottom"))}setMenu(e){let{open:t}=e;this.#d.style.maxHeight=`${t?this.#p.maxHeight:0}px`,t?(this.#K(),this.#e.classList.add(`${this.fieldKey}-menu-open`),this.#x(document,"click",(e=>this.#$(e))),this.#a.tabIndex="0",this.#l.tabIndex="0",this.#i.setAttribute("aria-expanded","true"),this.#F(this.#h,"aria-hidden",!1),this.#F(this.#a,"aria-hidden",!1),this.#P()):(this.#e.classList.remove(`${this.fieldKey}-menu-open`),document.removeEventListener("click",this.#$),this.searchOptions(""),this.#a.blur(),this.#a.tabIndex="-1",this.#l.tabIndex="-1",this.#i.setAttribute("aria-expanded","false"),this.#F(this.#h,"aria-hidden",!0),this.#F(this.#a,"aria-hidden",!0))}#S(e){"Space"===e.code&&(this.#a.focus(),this.setMenu({open:!0})),"click"===e.type&&(this.#O()?this.setMenu({open:!1}):(this.#a.focus(),this.setMenu({open:!0})))}set disabled(e){"true"===String(e).toLowerCase()?(this.#e.classList.add("disabled"),this.#t.disabled=!0,this.#i.tabIndex="-1",this.#o.tabIndex="-1",this.#F(this.#i,"aria-label","Country Field disabled"),this.setMenu({open:!1})):"false"===String(e).toLowerCase()&&(this.#e.classList.remove("disabled"),this.#t.removeAttribute("disabled"),this.#i.tabIndex="0",this.#o.tabIndex="0",this.#F(this.#i,"aria-label",this.#p.placeholder))}get disabled(){return this.#t.disabled}set readonly(e){"true"===String(e).toLowerCase()?(this.#e.classList.add("disabled"),this.#t.readOnly=!0,this.#i.tabIndex="-1",this.#o.tabIndex="-1",this.setMenu({open:!1})):"false"===String(e).toLowerCase()&&(this.#e.classList.remove("disabled"),this.#t.removeAttribute("readonly"),this.#i.tabIndex="0",this.#o.tabIndex="0")}get readonly(){return this.#t.readOnly}set value(e){this.#t.value=e}get value(){var e;return null===(e=this.#R())||void 0===e?void 0:e.val}#D(){this.#y.forEach((e=>{let{selector:t,eventType:i,cb:n}=e;t.removeEventListener(i,n)}))}destroy(){this.#h.innerHTML="",this.value="",this.#D()}}return t})()));