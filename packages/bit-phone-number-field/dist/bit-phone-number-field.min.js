var bit_phone_number_field=function(){"use strict";return class{#t="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>";#e="www.cloudflare.com/cdn-cgi/trace";#s="api.geonames.org/countryCodeJSON?username=bitcodezoho1";#i=null;#n=null;#o=null;#l=null;#h=null;#r=null;#a=null;#u=null;#c=null;#d=null;#p=null;#m=null;#f=null;#y=30;#g=[];#C=[];#b=!1;#E=[];#I={maxHeight:370,detectCountryByIp:!1,detectCountryByGeo:!1,optionFlagImage:!0,searchCountryPlaceholder:"Search Country",noCountryFoundText:"No Country Found",searchClearable:!0,defaultCountryKey:"",attributes:{},classNames:{}};#v="";#w=null;#S="";#N=null;#x=null;constructor(t,e){Object.assign(this.#I,e),this.#N=e.document||document,this.#x=e.window||window,this.#v=e.assetsURL||"",this.#i="string"==typeof t?this.#N.querySelector(t):t,this.#g=[...this.#I.options].filter((t=>!t.hide)),this.#C=this.#P(),this.fieldKey=this.#I.fieldKey,this.init()}init(){this.#d=this.#L(`.${this.fieldKey}-phone-inner-wrp`),this.#p=this.#L(`.${this.fieldKey}-phone-number-input`),this.#n=this.#L(`.${this.fieldKey}-phone-hidden-input`),this.#o=this.#L(`.${this.fieldKey}-input-clear-btn`),this.#r=this.#L(`.${this.fieldKey}-selected-country-img`),this.#u=this.#L(`.${this.fieldKey}-option-search-wrp`),this.#c=this.#L(`.${this.fieldKey}-opt-search-input`),this.#l=this.#L(`.${this.fieldKey}-dpd-wrp`),this.#h=this.#L(`.${this.fieldKey}-option-wrp`),this.#m=this.#L(`.${this.fieldKey}-search-clear-btn`),this.#f=this.#L(`.${this.fieldKey}-option-list`),this.setMenu({open:!1}),this.#F(this.#i,"keydown",(t=>{this.#A(t)})),this.#F(this.#l,"click",(t=>{this.#k(t)})),this.#F(this.#l,"keyup",(t=>{this.#k(t)})),this.#O(),this.#F(this.#p,"blur",(t=>{this.#T()})),this.#F(this.#p,"input",(t=>{this.#W(t)})),this.#F(this.#p,"focusout",(t=>{this.#B(t)})),this.#I.selectedCountryClearable&&this.#F(this.#o,"click",(t=>{this.#$(t)})),this.#I.detectCountryByIp&&this.#V(),this.#I.detectCountryByGeo&&this.#H(),this.#I.defaultCountryKey&&this.setSelectedCountryItem(this.#I.defaultCountryKey),this.#I.searchClearable&&(this.#K(this.#c,"padding-right","35px"),this.#K(this.#m,"display","none"),this.#F(this.#m,"click",(()=>{this.searchOptions("")}))),this.#c.value="",this.#F(this.#c,"keyup",(t=>{this.#M(t)})),this.#t=this.#I.placeholderImage?this.#I.placeholderImage:this.#t,this.#x.observeElm(this.#n,"value",((t,e)=>{this.#D(t,e)}))}#L(t){return this.#i.querySelector(t)}#F(t,e,s){t.addEventListener(e,s),this.#E.push({selector:t,eventType:e,cb:s})}#O(){this.#n.value&&(this.#D("",this.#n.value),this.#I.selectedCountryClearable&&this.#K(this.#o,"display","grid"))}#V(){const{protocol:t}=this.#x.location;fetch(`${t}//${this.#e}`).then((t=>t.text())).then((t=>{const e=t.trim().split("\n").reduce(((t,e)=>(t[(e=e.split("="))[0]]=e[1],t)),{});this.setSelectedCountryItem(e.loc)}))}#H(){navigator.geolocation.getCurrentPosition((t=>{const{latitude:e,longitude:s}=t.coords,{protocol:i}=this.#x.location;fetch(`${i}//${this.#s}&lat=${e}&lng=${s}`).then((t=>t.json())).then((t=>{this.setSelectedCountryItem(t.countryCode)}))}))}#A(t){const e=this.#N.activeElement;let s=null;const i=this.#R();if(t.target!==this.#p){if(i){const i=Number(e.dataset.index||-1);if("ArrowDown"===t.key||!t.shiftKey&&"Tab"===t.key){if(t.preventDefault(),e===this.#c)s=this.#L(".option:not(.disabled-opt)");else if(e.classList.contains("option")){const t=this.#U(i,"next"),e=this.#G(t);if(e)s=e;else if(t+1<this.#g.length){var n;null===(n=this.virtualOptionList)||void 0===n||n.scrollToIndex(t),setTimeout((()=>{const e=this.#G(t);e&&e.focus()}),50)}}}else if("ArrowUp"===t.key||t.shiftKey&&"Tab"===t.key){if(t.preventDefault(),e===this.#c)s=this.#p,this.#R()&&this.setMenu({open:!1});else if(e.classList.contains("option")){const t=this.#U(i,"previous"),e=this.#G(t);if(e)s=e;else if(t>0){var o;null===(o=this.virtualOptionList)||void 0===o||o.scrollToIndex(t),setTimeout((()=>{const e=this.#G(t);e&&e.focus()}),50)}else e||(s=this.#c)}}else"Escape"===t.key&&this.setMenu({open:!1})}else if(t.key>="a"&&t.key<="z"){clearTimeout(this.#w),this.#S+=t.key,this.#w=setTimeout((()=>{this.#S=""}),300);const e=this.#I.options.find((t=>!t.disabled&&t.lbl.toLowerCase().startsWith(this.#S)));e&&this.setSelectedCountryItem(e.i)}else if("ArrowDown"===t.key||"ArrowUp"===t.key){t.preventDefault();const e=this.#_(),s="ArrowDown"===t.key?"next":"previous",i=this.#U(e,s);i>-1&&i<this.#I.options.length&&(this.value=this.#I.options[i].val)}s&&s.focus()}}#z(t,e){const s=new Event(e);t.dispatchEvent(s)}#$(){this.#p.value="",this.setSelectedCountryItem(this.#I.defaultCountryKey),this.#z(this.#p,"input")}#G(t){return this.#L(`.${this.fieldKey}-option-list .option[data-index="${t}"]`)}#U(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1?arguments[1]:void 0;if("next"===e){const e=this.#I.options.length;for(let s=t+1;s<e;s+=1)if(!this.#I.options[s].disabled)return s}else if("previous"===e)for(let e=t-1;e>=0;e-=1)if(!this.#I.options[e].disabled)return e}#j(t){this.#i.contains(t.target)||this.setMenu({open:!1})}#P(){return this.#I.options.reduce(((t,e)=>{if(!t[e.code]){let{code:s}=e;"+"===s[0]&&(s=s.substring(1)),t[s]=e.i}return t}),{})}#q(t){let e=t;"+"===e[0]&&(e=e.substring(1,4));let s="";for(let t=3;t>0;t-=1)if(s=e.substring(0,t),s in this.#C)return s;return""}#J(t){var e;let s=this.#q(t);s&&"+"!==s[0]&&(s=`+${s}`);let i=(null===(e=this.#Q())||void 0===e?void 0:e.code)||"";if(i&&"+"!==i[0]&&(i=`+${i}`),s!==i)return this.setSelectedCountryItem(this.#C[s]),s}#X(t){return t.replace(/[^+0-9]/g,"")}#D(t,e){this.#J(e)&&t!==e&&this.#Y(this.#X(e)),"undefined"!=typeof bit_conditionals&&bit_conditionals({target:this.#n})}#T(){this.value.length>3&&(this.#p.value=this.value)}#W(t){const{value:e}=t.target;e&&this.#I.selectedCountryClearable?this.#K(this.#o,"display","grid"):this.#I.selectedCountryClearable&&this.#K(this.#o,"display","none"),!this.#b&&(e.length<4||"deleteContentBackward"===t.inputType||"deleteContentForward"===t.inputType)||this.#Y(e)}#Y(t){const e=this.#Q();let s="";if(s=this.#b?e.code:this.#J(t),s&&e){let i=e.frmt;const n=this.#I.valueFormat||"";i||(i=this.#I.inputFormat||"");const o=this.#Z(s,t,i);if(n){const e=this.#X(t),i=this.#Z(s,e,n);this.value=i}else this.value=t;this.#p.value=o}}#tt=t=>/[0-9]/.test(t);#Z(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i="",n=0;const o="+"===e[0]?e.substring(1):e;for(let e=0;e<s.length&&!(n>=o.length);e+=1){const l=s[e];if("c"===l){const e="+"===t[0]?t.substring(1):t;i+=e,n+=e.length}else if("#"===l){if(!this.#tt(o[n]))break;i+=o[n],n+=1}else o[n]===l?(i+=l,n+=1):i+=l}return n<o.length&&(i+=o.substring(n)),i}#B(t){const e=this.#X(t.target.value),s=this.#Q();if(s){const t=e.substring(s.code.length);return!s.ptrn||new RegExp(s.ptrn).test(t)}return!1}isValidated(){return this.#B({target:this.#p})}#_(){const t=this.#g.findIndex((t=>t.i===this.#a));return-1===t?0:t}#Q(){return this.#I.options.find((t=>t.i===this.#a))}#et(t){return this.#N.createElement(t)}#st(t,e){t.classList.add(e)}#it(t,e){t.textContent=e}#nt(t,e,s){var i;null==t||null===(i=t.setAttribute)||void 0===i||i.call(t,e,s)}#ot(t,e){e.trim().split(/\b\s+\b/g).forEach((e=>this.#st(t,e)))}#lt(t,e){const s=e.length;if(s)for(let i=0;i<s;i+=1)this.#nt(t,e[i].key,e[i].value)}#K(t,e,s){t.style.setProperty(e,s,"important")}#ht(){const t=this.#L(".option");if(!t)return;const e=this.#x.getComputedStyle(t),s=parseFloat(e.marginTop)+parseFloat(e.marginBottom),i=t.offsetHeight+s||0;i!==this.#y&&(this.#y=i,this.#f.innerHTML="",this.#rt())}#rt(){this.#f.innerHTML="";const t=this.#g.map(((t,e)=>{const s=this.#et("li");if(this.#nt(s,"data-key",t.i),this.#nt(s,"data-index",e),"option"in this.#I.attributes){const t=this.#I.attributes.option;this.#lt(s,t)}if(!t.i)return this.#it(s,t.lbl),this.#st(s,"opt-not-found"),s;if(this.#st(s,"option"),"option"in this.#I.classNames){const t=this.#I.classNames.option;t&&this.#ot(s,t)}const i=this.#et("span");if(this.#st(i,"opt-lbl-wrp"),"opt-lbl-wrp"in this.#I.classNames){const t=this.#I.classNames["opt-lbl-wrp"];t&&this.#ot(i,t)}if("opt-lbl-wrp"in this.#I.attributes){const t=this.#I.attributes["opt-lbl-wrp"];this.#lt(i,t)}if(this.#I.optionFlagImage){const e=this.#et("img");if(this.#st(e,"opt-icn"),"opt-icn"in this.#I.classNames){const t=this.#I.classNames["opt-icn"];t&&this.#ot(e,t)}if("opt-icn"in this.#I.attributes){const t=this.#I.attributes["opt-icn"];this.#lt(e,t)}e.src=`${this.#v}/${t.img}`,e.alt=`${t.lbl} flag image`,e.loading="lazy",this.#nt(e,"aria-hidden",!0),i.append(e)}const n=this.#et("span");if(this.#st(n,"opt-lbl"),"opt-lbl"in this.#I.classNames){const t=this.#I.classNames["opt-lbl"];t&&this.#ot(n,t)}if("opt-lbl"in this.#I.attributes){const t=this.#I.attributes["opt-lbl"];this.#lt(n,t)}this.#it(n,t.lbl),i.append(n);const o=this.#et("span");if(this.#st(o,"opt-suffix"),"opt-suffix"in this.#I.classNames){const t=this.#I.classNames["opt-suffix"];t&&this.#ot(o,t)}if(this.#it(o,t.code),this.#nt(o,"data-dev-opt-suffix",this.fieldKey),"opt-suffix"in this.#I.attributes){const t=this.#I.attributes["opt-suffix"];this.#lt(o,t)}return this.#nt(s,"tabindex",this.#R()?"0":"-1"),this.#nt(s,"role","option"),this.#nt(s,"aria-posinset",e+1),this.#nt(s,"aria-setsize",this.#g.length),this.#F(s,"click",(t=>{this.#b=!0,this.setSelectedCountryItem(t.currentTarget.dataset.key)})),this.#F(s,"keyup",(t=>{"Enter"===t.key&&(this.#b=!0,this.setSelectedCountryItem(t.currentTarget.dataset.key))})),t.disabled&&this.#st(s,"disabled-opt"),s.append(i,o),this.#a===t.i?(this.#st(s,"selected-opt"),this.#nt(s,"aria-selected",!0)):this.#nt(s,"aria-selected",!1),s}));this.#f.append(...t)}#at(t){const e=this.#X(this.#p.value);if(e){let s=this.#Q().frmt;s||(s=this.#I.inputFormat||"");const i=this.#X(e);this.#p.value=this.#Z(t,i,s)}else this.#p.value=t;if(e){const e=this.#I.valueFormat||"",s=this.#X(this.#p.value);this.value=e?this.#Z(t,s,e):this.#p.value}else this.value=t}#ut(){this.#a="",this.#I.selectedFlagImage&&(this.#r.src=this.#t),this.#b=!1,this.setMenu({open:!1}),this.value="",this.#I.selectedCountryClearable&&this.#K(this.#o,"display","none")}setSelectedCountryItem(t){if(this.value="",this.#a=t,!this.#a)return void this.#ut();const e=this.#Q();e&&(this.#I.selectedFlagImage&&(this.#r.src=`${this.#v}/${e.img}`),this.#at(e.code),this.setMenu({open:!1}),this.#b&&this.#p.focus())}#ct(){if(!this.#R())return;this.#rt();const t=this.#_(),e=this.#L(`.option[data-index="${t}"]`);e&&e.scrollIntoView({block:"nearest",inline:"nearest"})}#dt(t){this.#c.value=t}#M(t){if("Enter"===t.key&&this.#g.length){var e;const t=null===(e=this.#L(".option"))||void 0===e?void 0:e.dataset.key;this.setSelectedCountryItem(t),this.searchOptions("")}else this.searchOptions(t.target.value)}searchOptions(t){this.#dt(t);let e=[];t?(e=this.#I.options.filter((e=>{const s=t.toLowerCase(),i=(e.lbl||"").toLowerCase(),n=(e.val||"").toLowerCase(),o=e.code||"";return!!i.includes(s)||!!n.includes(s)||!!o.includes(s)||void 0})),e.length||(e=[{i:0,lbl:this.#I.noCountryFoundText}]),this.#g=e,this.#I.searchClearable&&this.#K(this.#m,"display","grid")):(this.#g=this.#I.options,this.#I.searchClearable&&this.#K(this.#m,"display","none")),this.#ct()}#R(){return this.#i.classList.contains("menu-open")}#pt(){const t=this.#d.getBoundingClientRect(),e=t.top,s=this.#x.innerHeight-t.bottom;s<e&&s<this.#I.maxHeight?(this.#K(this.#i,"flex-direction","column-reverse"),this.#K(this.#i,"bottom","0%")):(this.#K(this.#i,"flex-direction","column"),this.#K(this.#i,"bottom","auto"))}setMenu(t){let{open:e}=t;this.#K(this.#h,"max-height",`${e?this.#I.maxHeight:0}px`),e?(this.#pt(),this.#st(this.#i,"menu-open"),this.#F(this.#N,"click",(t=>this.#j(t))),this.#nt(this.#c,"tabindex",0),this.#nt(this.#m,"tabindex",0),this.#nt(this.#l,"aria-expanded",!0),this.#ct()):(this.#i.classList.remove("menu-open"),this.#N.removeEventListener("click",this.#j),setTimeout((()=>{this.searchOptions("")}),100),this.#nt(this.#c,"tabindex",-1),this.#nt(this.#m,"tabindex",-1),this.#nt(this.#l,"aria-expanded",!1))}#k(t){"Space"===t.code&&(this.#c.focus(),this.setMenu({open:!0})),"click"===t.type&&(this.#R()?this.setMenu({open:!1}):(this.#c.focus(),this.setMenu({open:!0})))}set value(t){this.#n.value=t||""}get value(){return this.#n.value}#mt(){this.#E.forEach((t=>{let{selector:e,eventType:s,cb:i}=t;e.removeEventListener(s,i)}))}destroy(){this.#f.innerHTML="",this.value="",this.#b=!1,this.#mt()}reset(t){this.#ut(),this.destroy(),this.init(),this.value=t}}}();
