!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).filepond_plugin_image_resize=t()}(this,(function(){"use strict";
/*!
     * FilePondPluginImageResize 2.0.10
     * Licensed under MIT, https://opensource.org/licenses/MIT/
     * Please visit https://pqina.nl/filepond/ for details.
     */const e=e=>{let{addFilter:t,utils:i}=e;const{Type:n}=i;return t("DID_LOAD_ITEM",((e,t)=>{let{query:i}=t;return new Promise(((t,n)=>{const o=e.file;if(!(e=>/^image/.test(e.type))(o)||!i("GET_ALLOW_IMAGE_RESIZE"))return t(e);const l=i("GET_IMAGE_RESIZE_MODE"),r=i("GET_IMAGE_RESIZE_TARGET_WIDTH"),u=i("GET_IMAGE_RESIZE_TARGET_HEIGHT"),d=i("GET_IMAGE_RESIZE_UPSCALE");if(null===r&&null===u)return t(e);const s=null===r?u:r,a=null===u?s:u,E=URL.createObjectURL(o);((e,t)=>{let i=new Image;i.onload=()=>{const e=i.naturalWidth,n=i.naturalHeight;i=null,t({width:e,height:n})},i.onerror=()=>t(null),i.src=e})(E,(i=>{if(URL.revokeObjectURL(E),!i)return t(e);let{width:n,height:o}=i;const r=(e.getMetadata("exif")||{}).orientation||-1;if(r>=5&&r<=8&&([n,o]=[o,n]),n===s&&o===a)return t(e);if(!d)if("cover"===l){if(n<=s||o<=a)return t(e)}else if(n<=s&&o<=s)return t(e);e.setMetadata("resize",{mode:l,upscale:d,size:{width:s,height:a}}),t(e)}))}))})),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e}));
