!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(e="undefined"!=typeof globalThis?globalThis:e||self).bit_filepond_plugin_image_validate_size=i()}(this,(function(){"use strict";
/*!
   * FilePondPluginImageValidateSize 1.2.7
   * Licensed under MIT, https://opensource.org/licenses/MIT/
   * Please visit https://pqina.nl/filepond/ for details.
   */const e=({addFilter:e,utils:i})=>{const{Type:t,replaceInString:a,isFile:E}=i;return e("LOAD_FILE",((e,{query:i})=>new Promise(((t,_)=>{if(!E(e)||!(e=>/^image/.test(e.type))(e)||!i("GET_ALLOW_IMAGE_VALIDATE_SIZE"))return void t(e);const I={minWidth:i("GET_IMAGE_VALIDATE_SIZE_MIN_WIDTH"),minHeight:i("GET_IMAGE_VALIDATE_SIZE_MIN_HEIGHT"),maxWidth:i("GET_IMAGE_VALIDATE_SIZE_MAX_WIDTH"),maxHeight:i("GET_IMAGE_VALIDATE_SIZE_MAX_HEIGHT"),minResolution:i("GET_IMAGE_VALIDATE_SIZE_MIN_RESOLUTION"),maxResolution:i("GET_IMAGE_VALIDATE_SIZE_MAX_RESOLUTION")},l=i("GET_IMAGE_VALIDATE_SIZE_MEASURE");((e,i,t)=>new Promise(((a,E)=>{const _=({width:e,height:t})=>{const{minWidth:_,minHeight:I,maxWidth:l,maxHeight:o,minResolution:n,maxResolution:T}=i,A=e*t;e<_||t<I?E("TOO_SMALL"):e>l||t>o?E("TOO_BIG"):null!==n&&A<n?E("TOO_LOW_RES"):null!==T&&A>T&&E("TOO_HIGH_RES"),a()};(e=>new Promise(((i,t)=>{const a=document.createElement("img");a.src=URL.createObjectURL(e),a.onerror=e=>{clearInterval(E),t(e)};const E=setInterval((()=>{a.naturalWidth&&a.naturalHeight&&(clearInterval(E),URL.revokeObjectURL(a.src),i({width:a.naturalWidth,height:a.naturalHeight}))}),1)})))(e).then(_).catch((()=>{t?t(e,i).then(_).catch((()=>E())):E()}))})))(e,I,l).then((()=>{t(e)})).catch((t=>{const E=t?{TOO_SMALL:{label:i("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_SMALL"),details:i("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_SIZE")},TOO_BIG:{label:i("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_BIG"),details:i("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_SIZE")},TOO_LOW_RES:{label:i("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_LOW"),details:i("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_RESOLUTION")},TOO_HIGH_RES:{label:i("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_HIGH"),details:i("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_RESOLUTION")}}[t]:{label:i("GET_IMAGE_VALIDATE_SIZE_LABEL_FORMAT_ERROR"),details:e.type};_({status:{main:E.label,sub:t?a(E.details,I):E.details}})}))})))),{options:{allowImageValidateSize:[!0,t.BOOLEAN],imageValidateSizeLabelFormatError:["Image type not supported",t.STRING],imageValidateSizeMeasure:[null,t.FUNCTION],imageValidateSizeMinResolution:[null,t.INT],imageValidateSizeMaxResolution:[null,t.INT],imageValidateSizeLabelImageResolutionTooLow:["Resolution is too low",t.STRING],imageValidateSizeLabelImageResolutionTooHigh:["Resolution is too high",t.STRING],imageValidateSizeLabelExpectedMinResolution:["Minimum resolution is {minResolution}",t.STRING],imageValidateSizeLabelExpectedMaxResolution:["Maximum resolution is {maxResolution}",t.STRING],imageValidateSizeMinWidth:[1,t.INT],imageValidateSizeMinHeight:[1,t.INT],imageValidateSizeMaxWidth:[65535,t.INT],imageValidateSizeMaxHeight:[65535,t.INT],imageValidateSizeLabelImageSizeTooSmall:["Image is too small",t.STRING],imageValidateSizeLabelImageSizeTooBig:["Image is too big",t.STRING],imageValidateSizeLabelExpectedMinSize:["Minimum size is {minWidth} × {minHeight}",t.STRING],imageValidateSizeLabelExpectedMaxSize:["Maximum size is {maxWidth} × {maxHeight}",t.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e}));
