!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bit_paypal_field=t()}(this,(function(){"use strict";const e=".bf-form";return class{#e="";#t={namespace:"paypal",payType:"payment",currency:"USD",amount:1,shipping:0,tax:0,style:{label:"paypal",color:"gold",shape:"rect",layout:"vertical"}};constructor(e,t){Object.assign(this.#t,t),this.#e=e,this.init()}init(){const{namespace:e}=this.#t,t=window[e],i={style:this.#i()};this.#n()&&(i.fundingSource=t.FUNDING[this.#t.style.payBtn]),this.#s()?i.createSubscription=(e,t)=>this.#o(e,t):i.createOrder=(e,t)=>this.#r(e,t),this.#t.onInit&&(i.onInit=this.#t.onInit),t&&t.Buttons(i).render(this.#e)}#s(){return"subscription"===this.#t.payType}#n(){return"standalone"===this.#t.style.layout}#o(e,t){return t.subscription.create({plan_id:this.#t.planId})}#a(e,t){var i;return null===(i=document.querySelector(t))||void 0===i?void 0:i.querySelector(e)}#c(t){let i=this.#a(`[name="${t}"]`,e);return i?("radio"===i.type&&(i=this.#a(`[name="${t}"]:checked`,e)),i.value||""):""}#r(e,t){const{currency:i,amount:n,shipping:s,tax:o}=this.#t,r=this.#c(this.#t.amountFld)||n,a=this.#c(this.#t.shippingVal)||s,c=this.#c(this.#t.taxVal)||o,l=1*Number(r).toFixed(2),u=1*Number(a).toFixed(2),p=1*(Number(c)*l/100).toFixed(2),d=1*(l+u+p).toFixed(2);return t.order.create({purchase_units:[{description:this.#c(this.#t.descFld)||this.#t.description,amount:{currency_code:i,value:d,breakdown:{item_total:{currency_code:i,value:l},shipping:{currency_code:i,value:u},tax_total:{currency_code:i,value:p}}}}]})}#i(){const{label:e,color:t,shape:i,layout:n,height:s}=this.#t.style,o={label:this.#s()?"subscribe":e,color:t,shape:i};return this.#n()||(o.layout=n),void 0!==s&&(o.height=Number(s)),o}destroy(){this.#e.innerHTML=""}reset(){this.destroy(),this.init()}}}));
